<div class="wq-hero-wrapper">
    <div class="wq-hero-header">
        <div class="wq-hero-avatar-box">
            <img src="/img/avatar.png" alt="Avatar">
        </div>
        <div class="wq-hero-info">
            <div class="wq-hero-name">Wang Qing</div>
            <div class="wq-hero-tags">
                <span class="tag">@ ç»éªŒåˆ†äº«</span>
                <span class="tag">@ è½¯ä»¶å·¥å…·</span>
            </div>
            <div class="wq-hero-desc">
                è¿™æ˜¯æˆ‘çš„åšå®¢ï¼Œå‘å¸ƒå­¦ä¹ ç¬”è®°ã€ç»éªŒåˆ†äº«ä¸é«˜è´¨é‡èµ„æºã€‚
            </div>
        </div>
    </div>

    <div class="wq-hero-heatmap-wrapper">
        <div id="pixel-grid" class="wq-pixel-grid"></div>
        <div class="wq-status-bar">
            <span class="pulse-dot"></span>
            <span id="current-word-label">INITIALIZING</span>
        </div>
    </div>
</div>

<style>
:root {
    --wq-blue-empty: #e1e9f5;
    --wq-blue-primary: #007aff;
    --wq-blue-glow: rgba(0, 122, 255, 0.5);
    --wq-text-title: #1a1a1a;
    --wq-text-sub: #666666;
    --wq-blue-light: #60a5fa;
    --wq-blue-light-glow: rgba(96, 165, 250, 0.6);
}

[data-theme='dark'], .dark {
    --wq-blue-empty: #1c222d;
    --wq-blue-primary: #3b9eff;
    --wq-blue-glow: rgba(59, 158, 255, 0.6);
    --wq-text-title: #ffffff;
    --wq-text-sub: #a0a6b1;
    --wq-blue-light: #e0f2fe;
    --wq-blue-light-glow: rgba(224, 242, 254, 0.6);
}

.wq-hero-wrapper {
    width: 100%;
    margin: 2.5rem 0;
    font-family: -apple-system, system-ui, sans-serif;
}

.wq-hero-header {
    display: flex;
    align-items: flex-start;
    gap: 1.8rem;
    margin-bottom: 2rem;
}

.wq-hero-avatar-box img {
    width: 90px;
    height: 90px;
    border-radius: 50%;
    border: 3px solid var(--wq-blue-empty);
    padding: 2px;
}

.wq-hero-info {
    flex: 1;
    padding-top: 4px;
}

.wq-hero-name {
    font-size: 32px;
    font-weight: 800;
    color: var(--wq-text-title);
    letter-spacing: -0.5px;
    margin-bottom: 8px;
}

.wq-hero-tags {
    display: flex;
    gap: 8px;
    margin-bottom: 12px;
}

.wq-hero-tags .tag {
    font-size: 12px;
    padding: 2px 10px;
    border-radius: 20px;
    background: var(--wq-blue-empty);
    color: var(--wq-blue-primary);
    font-weight: 600;
}

.wq-hero-desc {
    font-size: 15px;
    color: var(--wq-text-sub);
    max-width: 600px;
    line-height: 1.6;
}

/* çƒ­åŠ›å›¾å¸ƒå±€ï¼š11è¡Œï¼Œå¯†é›†æ’åˆ— */
.wq-hero-heatmap-wrapper {
    width: 100%;
    position: relative;
}

.wq-pixel-grid {
    display: grid;
    grid-template-rows: repeat(11, 11px); 
    grid-auto-flow: column;
    grid-auto-columns: 11px;
    gap: 4px; 
    overflow: hidden;
    justify-content: space-between;
}

.pixel-dot {
    width: 11px;
    height: 11px;
    background: var(--wq-blue-empty);
    border-radius: 2px;
    transition: all 0.7s cubic-bezier(0.4, 0, 0.2, 1);
}

.pixel-dot.active {
    background: var(--wq-blue-primary);
    box-shadow: 0 0 8px var(--wq-blue-glow);
    transform: scale(1.05);
}

/* âš¡ï¸ æ¥è§¦ä¸è‰¯æ•ˆæœï¼šéƒ¨åˆ†åƒç´ ç†„ç­/å˜æš— */
.pixel-dot.active.glitch-off {
    background: var(--wq-blue-empty);
    box-shadow: none;
    transform: scale(1);
    opacity: 0.5;
}

/* ğŸ’¡ é«˜äº®é—ªçƒï¼šæµ…è“è‰² */
.pixel-dot.active.glitch-bright {
    background: var(--wq-blue-light);
    box-shadow: 0 0 10px var(--wq-blue-light-glow);
}

/* âš¡ï¸ æ–°å¢ï¼šèƒŒæ™¯éšæœºå™ªç‚¹ï¼ˆæ¯”æ–‡å­—æµ…ã€ä¸å‘å…‰ï¼‰ */
.pixel-dot.noise {
    background: var(--wq-blue-primary);
    opacity: 0.28; /* æé«˜ä¸é€æ˜åº¦ï¼Œè®©å™ªç‚¹æ›´æ˜æ˜¾ */
}

.wq-status-bar {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    margin-top: 12px;
    font-family: 'Courier New', Courier, monospace;
    font-size: 11px;
    color: var(--wq-text-sub);
    letter-spacing: 1px;
}

.pulse-dot {
    width: 6px;
    height: 6px;
    background: var(--wq-blue-primary);
    border-radius: 50%;
    margin-right: 8px;
    animation: wq-pulse 2s infinite;
}

@keyframes wq-pulse {
    0% { transform: scale(0.95); opacity: 1; }
    50% { transform: scale(1.5); opacity: 0.5; }
    100% { transform: scale(0.95); opacity: 1; }
}

@media (max-width: 640px) {
    .wq-hero-header { gap: 1rem; flex-direction: column; }
    .wq-hero-avatar-box img { width: 70px; height: 70px; }
    .wq-hero-name { font-size: 26px; }
    .wq-pixel-grid {
        grid-template-rows: repeat(11, 8px);
        grid-auto-columns: 8px;
        gap: 2px; /* ç¼©å°é—´è·ï¼Œé˜²æ­¢æ‰‹æœºç«¯æ¢è¡Œæˆ–æˆªæ–­ */
    }
    .pixel-dot { width: 8px; height: 8px; }
}
</style>

<script>
(function() {
    // 1. å®šä¹‰å­—ä½“æ˜ å°„ (5x7 dot matrix)
    
    const font = {
        'H': [0,1,2,3,4,5,6,10,17,24,31,28,29,30,31,32,33,34],
        'E': [0,1,2,3,4,5,6,7,10,13,14,17,20,21,24,27,28,31,34],
        'L': [0,1,2,3,4,5,6,13,20,27,34],
        'O': [1,2,3,4,5,7,13,14,20,21,27,29,30,31,32,33],
        'W': [0,1,2,3,4,5,13,20,26,34,33,32,31,30,29],
        'R': [0,1,2,3,4,5,6,7,10,14,17,21,24,28,29,32,33],
        'D': [0,1,2,3,4,5,6,7,13,14,20,21,27,29,30,31,32,33],
        'I': [0,6,7,8,9,10,11,12,13,14,20,21,27,28,34],
        'F': [0,1,2,3,4,5,6,7,10,14,17,21,24],
        'U': [0,1,2,3,4,5,13,20,27,28,29,30,31,32,33],
        'T': [0,7,14,21,22,23,24,25,26,27,28,34],
        'S': [1,2,3,6,7,10,13,14,17,20,21,24,27,31,32,33],
        'G': [1,2,3,4,5,0,6,7,13,21,27,25,26,33,32,31],
        'N': [0,1,2,3,4,5,6,8,16,24,28,29,30,31,32,33,34]
    };

    const grid = document.getElementById('pixel-grid');
    const label = document.getElementById('current-word-label');
    const dots = [];
    const totalDots = 660; // 11 rows * 60 cols
    const rows = 11;
    
    // è®°å½•å±äºâ€œæ–‡å­—â€çš„åƒç´ ç´¢å¼•ï¼Œé¿å…å™ªç‚¹è¦†ç›–æ–‡å­—
    let textIndices = new Set();
    let textDotsArray = []; // å­˜å‚¨æ–‡å­—åƒç´ çš„ DOM å¼•ç”¨ï¼Œæ–¹ä¾¿å¿«é€Ÿéå†

    // åˆå§‹åŒ–ç½‘æ ¼
    for (let i = 0; i < totalDots; i++) {
        const dot = document.createElement('div');
        dot.className = 'pixel-dot';
        grid.appendChild(dot);
        dots.push(dot);
    }

    // 2. æ ¸å¿ƒç»˜åˆ¶å‡½æ•°ï¼šåªç”» "HELLO"
    function drawHello() {
        // æ¸…é™¤æ‰€æœ‰çŠ¶æ€
        dots.forEach(d => d.classList.remove('active', 'noise', 'glitch-off', 'glitch-bright'));
        textIndices.clear();
        textDotsArray = [];
        
        const word = "HELLO";
        label.innerText = "SYSTEM ONLINE"; // æ›´æ–°çŠ¶æ€æ æ–‡å­—ï¼Œæ›´æœ‰ç§‘æŠ€æ„Ÿ
        
        // å‚ç›´å±…ä¸­åç§» (11è¡Œ - 7è¡Œå­—ä½“) / 2 = 2
        const verticalPadding = 2; 

        // âœ… åŠ¨æ€è®¡ç®—æ°´å¹³å±…ä¸­ï¼šæ ¹æ®å±å¹•å®é™…èƒ½å®¹çº³çš„åˆ—æ•°æ¥è®¡ç®—èµ·å§‹ä½ç½®
        // è·å–å½“å‰å®¹å™¨å®½åº¦
        const gridWidth = grid.clientWidth;
        // è·å–å•ä¸ªæ ¼å­çš„å®½åº¦ï¼ˆåŒ…å« gapï¼‰
        // æ¡Œé¢: 11px dot + 4px gap = 15px
        // æ‰‹æœº: 8px dot + 2px gap = 10px
        const isMobile = window.innerWidth < 640;
        const colWidth = isMobile ? 10 : 15; 
        const letterSpacing = isMobile ? 6 : 7; // æ‰‹æœºç«¯ç´§å‡‘ä¸€ç‚¹ (1åˆ—é—´è·)ï¼Œæ¡Œé¢ç«¯å®½ä¸€ç‚¹ (2åˆ—é—´è·)
        
        // å½“å‰è§†å£èƒ½æ˜¾ç¤ºçš„åˆ—æ•°
        const visibleCols = Math.floor(gridWidth / colWidth);
        
        // "HELLO" æ€»å®½åº¦ä¼°ç®—ï¼š(å­—æ¯æ•°-1)*é—´è· + æœ€åä¸€ä¸ªå­—æ¯å®½(5)
        const totalTextCols = (word.length - 1) * letterSpacing + 5;

        // è®¡ç®—èµ·å§‹åˆ—ï¼Œç¡®ä¿å±…ä¸­
        let startCol = Math.floor((visibleCols - totalTextCols) / 2);
        if (startCol < 0) startCol = 0; // é˜²æ­¢æº¢å‡º

        word.split('').forEach((char, index) => {
            if (font[char]) {
                font[char].forEach(offset => {
                    const colInLetter = Math.floor(offset / 7);
                    const rowInLetter = offset % 7;
                    
                    const finalRow = rowInLetter + verticalPadding;
                    const finalCol = startCol + index * letterSpacing + colInLetter;
                    
                    // è®¡ç®—ä¸€ç»´ç´¢å¼• (Column-major)
                    const finalIndex = (finalCol * rows) + finalRow;
                    
                    if (dots[finalIndex] && finalIndex < totalDots) {
                        dots[finalIndex].classList.add('active');
                        textIndices.add(finalIndex);
                        textDotsArray.push(dots[finalIndex]);
                    }
                });
            }
        });
    }

    // 3. éšæœºå™ªç‚¹åŠ¨ç”» (Tech Noise)
    function animateNoise() {
        // æ¯æ¬¡éšæœºç‚¹äº® 1-3 ä¸ªéæ–‡å­—åƒç´ ï¼ˆèƒŒæ™¯å™ªç‚¹ï¼‰
        const count = Math.floor(Math.random() * 3) + 1;
        
        for(let k=0; k<count; k++) {
            const idx = Math.floor(Math.random() * totalDots);
            // å¦‚æœè¯¥ç‚¹ä¸æ˜¯æ–‡å­—ï¼Œä¸”å½“å‰æ²¡æœ‰è¢«ç‚¹äº®
            if (!textIndices.has(idx) && !dots[idx].classList.contains('noise')) {
                const dot = dots[idx];
                dot.classList.add('noise');
                
                // éšæœºæ—¶é—´åç†„ç­ (æ”¾æ…¢ï¼š500ms - 1500ms)
                setTimeout(() => {
                    dot.classList.remove('noise');
                }, 500 + Math.random() * 1000);
            }
        }
    }

    // 4. æ–‡å­—é—ªçƒåŠ¨ç”» (Text Shimmer)
    function animateText() {
        if (textDotsArray.length === 0) return;
        
        // éå†æ‰€æœ‰æ–‡å­—åƒç´ ï¼Œéšæœºæ”¹å˜é¢œè‰²
        textDotsArray.forEach(dot => {
            // é‡ç½®çŠ¶æ€
            dot.classList.remove('glitch-off', 'glitch-bright');
            
            const r = Math.random();
            if (r < 0.03) {
                // 3% æ¦‚ç‡é«˜äº®ï¼ˆæµ…è“é—ªçƒï¼‰
                dot.classList.add('glitch-bright');
            } else if (r < 0.12) {
                // 12% æ¦‚ç‡ç†„ç­ï¼ˆæ¨¡æ‹Ÿæ¥è§¦ä¸è‰¯/æ–­æ–­ç»­ç»­ï¼‰
                dot.classList.add('glitch-off');
            }
        });
    }

    // åˆå§‹åŒ–
    drawHello();
    
    // å¯åŠ¨å¾ªç¯ï¼šå™ªç‚¹ 200msï¼Œæ–‡å­—é—ªçƒåŠ å¿«åˆ° 100ms ä»¥å¢å¼ºâ€œæ•…éšœæ„Ÿâ€
    setInterval(animateNoise, 200);
    setInterval(animateText, 100);

    // çª—å£å¤§å°æ”¹å˜æ—¶é‡æ–°è®¡ç®—å±…ä¸­
    let resizeTimer;
    window.addEventListener('resize', () => {
        clearTimeout(resizeTimer);
        resizeTimer = setTimeout(drawHello, 200);
    });
})();
</script>