<div class="wq-hero-wrapper">
    <div class="wq-hero-header">
        <div class="wq-hero-avatar-alt">
            <img src="/img/avatar.png" alt="Avatar">
        </div>
        <div class="wq-hero-content">
            <div class="wq-hero-title">
                <span class="wq-hero-name">WangQing</span>
                <div class="wq-hero-tags">
                    <span class="tag">@Blogger</span>
                    <span class="tag">@Developer</span>
                </div>
            </div>
            <div class="wq-hero-desc">
                学习笔记 · 文档整理 · 资源分享，专注于 LLMs 和技术沉淀
            </div>
        </div>
    </div>

    <div class="wq-hero-heatmap-container">
        <div id="pixel-grid" class="wq-pixel-grid"></div>
    </div>
</div>

<style>
/* 颜色变量定义 */
:root {
    --wq-pixel-empty: #ebedf0;
    --wq-pixel-filled: #39d353;
    --wq-text-main: #1f2328;
    --wq-text-mute: #57606a;
}

[data-theme='dark'], .dark {
    --wq-pixel-empty: #161b22;
    --wq-pixel-filled: #39d353;
    --wq-text-main: #f0f6fc;
    --wq-text-mute: #8b949e;
}

.wq-hero-wrapper {
    width: 100%;
    margin: 2rem 0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
}

/* 头部样式 */
.wq-hero-header {
    display: flex;
    align-items: center;
    gap: 1.2rem;
    margin-bottom: 1.5rem;
}

.wq-hero-avatar-alt img {
    width: 72px;
    height: 72px;
    border-radius: 50%;
    object-fit: cover;
    display: block;
}

.wq-hero-content {
    flex: 1;
}

.wq-hero-title {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 10px;
}

.wq-hero-name {
    font-size: 22px;
    font-weight: 600;
    color: var(--wq-text-main);
}

.wq-hero-tags {
    display: flex;
    gap: 6px;
}

.wq-hero-tags .tag {
    font-size: 11px;
    padding: 1px 6px;
    border-radius: 4px;
    background: rgba(57, 211, 83, 0.15);
    color: #2da44e;
    font-weight: 500;
}

.wq-hero-desc {
    margin-top: 6px;
    font-size: 14px;
    color: var(--wq-text-mute);
    line-height: 1.4;
}

/* 热力图样式 - 密集型 */
.wq-hero-heatmap-container {
    width: 100%;
    overflow: hidden; /* 防止手机端溢出 */
    padding-top: 5px;
}

.wq-pixel-grid {
    display: grid;
    grid-template-rows: repeat(7, 9px); /* 缩小尺寸从12px到9px */
    grid-auto-flow: column;
    grid-auto-columns: 9px;
    gap: 3px;
    /* 允许平滑滚动或截断，确保不撑破页面 */
    justify-content: space-between;
}

.pixel-dot {
    width: 9px;
    height: 9px;
    background: var(--wq-pixel-empty);
    border-radius: 1.5px;
    transition: background 0.6s ease, transform 0.3s ease;
}

.pixel-dot.active {
    background: var(--wq-pixel-filled);
    box-shadow: 0 0 4px rgba(57, 211, 83, 0.4);
}

/* 移动端特殊适配 */
@media (max-width: 640px) {
    .wq-hero-header {
        gap: 1rem;
    }
    .wq-hero-avatar-alt img {
        width: 60px;
        height: 60px;
    }
    .wq-hero-name {
        font-size: 18px;
    }
    .wq-pixel-grid {
        grid-template-rows: repeat(7, 7px); /* 手机端更小 */
        grid-auto-columns: 7px;
        gap: 2px;
    }
    .pixel-dot {
        width: 7px;
        height: 7px;
    }
}
</style>

<script>
(function() {
    // 更多词库，包含 WORLD
    const words = ["HELLO", "WORLD", "BLOG", "CODE", "KEEP"];
    let wordIndex = 0;
    
    // 扩展字母矩阵 5x7
    const font = {
        'H': [0,1,2,3,4,5,6,10,17,24,31,28,29,30,31,32,33,34],
        'E': [0,1,2,3,4,5,6,7,10,13,14,17,20,21,24,27,28,31,34],
        'L': [0,1,2,3,4,5,6,13,20,27,34],
        'O': [1,2,3,4,5,7,13,14,20,21,27,29,30,31,32,33],
        'W': [0,1,2,3,4,5,13,20,26,34,33,32,31,30,29],
        'R': [0,1,2,3,4,5,6,7,10,14,17,21,24,28,29,32,33],
        'D': [0,1,2,3,4,5,6,7,13,14,20,21,27,29,30,31,32,33],
        'B': [0,1,2,3,4,5,6,7,10,13,14,17,20,21,24,27,29,30,31,33],
        'C': [1,2,3,4,5,0,6,7,13,14,20,21,27],
        'G': [1,2,3,4,5,0,6,7,13,21,27,25,26,33,32,31],
        'K': [0,1,2,3,4,5,6,10,17,25,33,26,18],
        'P': [0,1,2,3,4,5,6,7,10,14,17,21,24,28,29]
    };

    const grid = document.getElementById('pixel-grid');
    const dots = [];
    const totalDots = 350; // 足够覆盖绝大多数屏幕宽度

    for (let i = 0; i < totalDots; i++) {
        const dot = document.createElement('div');
        dot.className = 'pixel-dot';
        grid.appendChild(dot);
        dots.push(dot);
    }

    function drawWord(word) {
        dots.forEach(d => d.classList.remove('active'));
        
        // 计算居中起始位置
        const wordLen = word.length * 7; 
        let startCol = Math.floor((50 - wordLen) / 2); 
        if(window.innerWidth < 640) startCol = 1; // 手机端靠左

        word.split('').forEach((char, index) => {
            if (font[char]) {
                font[char].forEach(offset => {
                    const dotIndex = ((startCol + index * 7) * 7) + offset;
                    if (dots[dotIndex]) {
                        setTimeout(() => {
                            dots[dotIndex].classList.add('active');
                        }, Math.random() * 600);
                    }
                });
            }
        });
    }

    function cycle() {
        drawWord(words[wordIndex]);
        wordIndex = (wordIndex + 1) % words.length;
    }

    cycle();
    setInterval(cycle, 5000);
})();
</script>