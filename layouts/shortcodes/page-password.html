<style>
  :root{
    --wq-mask: rgba(0,0,0,.40);
    --wq-card-bg: rgba(255,255,255,.82);
    --wq-card-border: rgba(0,0,0,.10);
    --wq-text: rgba(17,24,39,.95);
    --wq-sub: rgba(17,24,39,.68);
    --wq-shadow: 0 26px 70px rgba(0,0,0,.22);
    --wq-radius: 22px;
    --wq-input-bg: rgba(255,255,255,.70);
    --wq-input-border: rgba(0,0,0,.12);
    --wq-btn-bg: rgba(17,24,39,.06);
    --wq-btn-text: rgba(17,24,39,.90);
    --wq-btn-border: rgba(0,0,0,.12);
    --wq-btn-primary-bg: rgba(17,24,39,.92);
    --wq-btn-primary-text: #fff;
  }
  html.dark{
    --wq-mask: rgba(0,0,0,.55);
    --wq-card-bg: rgba(24,24,27,.74);
    --wq-card-border: rgba(255,255,255,.10);
    --wq-text: rgba(255,255,255,.92);
    --wq-sub: rgba(255,255,255,.68);
    --wq-shadow: 0 28px 80px rgba(0,0,0,.55);
    --wq-input-bg: rgba(255,255,255,.08);
    --wq-input-border: rgba(255,255,255,.14);
    --wq-btn-bg: rgba(255,255,255,.10);
    --wq-btn-text: rgba(255,255,255,.90);
    --wq-btn-border: rgba(255,255,255,.14);
    --wq-btn-primary-bg: rgba(255,255,255,.90);
    --wq-btn-primary-text: rgba(0,0,0,.88);
  }

  .wq-pw-mask{
    position: fixed;
    inset: 0;
    z-index: 9999;
    display: none;
    align-items: center;
    justify-content: center;
    padding: 18px;
    background: var(--wq-mask);
    backdrop-filter: blur(10px) saturate(120%);
    -webkit-backdrop-filter: blur(10px) saturate(120%);
  }

  .wq-pw-card{
    width: min(560px, 100%);
    background: var(--wq-card-bg);
    border: 1px solid var(--wq-card-border);
    border-radius: var(--wq-radius);
    box-shadow: var(--wq-shadow);
    overflow: hidden;
    transform: translateY(10px) scale(.98);
    opacity: 0;
    transition: transform .22s ease, opacity .22s ease;
  }
  .wq-pw-mask.show .wq-pw-card{
    transform: translateY(0) scale(1);
    opacity: 1;
  }

  .wq-pw-header{
    padding: 18px 20px 10px;
    display:flex;
    align-items:flex-start;
    justify-content:space-between;
    gap: 14px;
    border-bottom: 1px solid var(--wq-card-border);
  }
  .wq-pw-title{
    display:flex;
    align-items:center;
    gap: 10px;
    font-size: 16px;
    font-weight: 800;
    color: var(--wq-text);
    letter-spacing: .2px;
  }
  .wq-pw-badge{
    width: 38px; height: 38px;
    border-radius: 14px;
    display:grid;
    place-items:center;
    background: rgba(255,255,255,.55);
    border: 1px solid var(--wq-card-border);
    flex: 0 0 auto;
  }
  html.dark .wq-pw-badge{ background: rgba(255,255,255,.10); }

  .wq-pw-sub{
    margin-left: 48px;
    margin-top: 6px;
    color: var(--wq-sub);
    font-size: 13.5px;
    line-height: 1.6;
  }

  .wq-pw-body{
    padding: 16px 20px 4px;
    color: var(--wq-text);
  }

  /* è¾“å…¥æ¡† + æ˜¾ç¤ºå¯†ç æŒ‰é’® */
  .wq-pw-field{
    margin-top: 12px;
    position: relative;
  }
  .wq-pw-input{
    width: 100%;
    padding: 12px 44px 12px 12px; /* å³ä¾§ç•™ç»™â€œçœ¼ç›â€ */
    border-radius: 14px;
    border: 1px solid var(--wq-input-border);
    background: var(--wq-input-bg);
    color: var(--wq-text);
    font-size: 14px;
    outline: none;
  }
  .wq-pw-input:focus{
    border-color: rgba(37,99,235,.35);
    box-shadow: 0 0 0 4px rgba(37,99,235,.12);
  }
  .wq-pw-eye{
    position:absolute;
    right: 8px;
    top: 50%;
    transform: translateY(-50%);
    width: 34px;
    height: 34px;
    border-radius: 12px;
    border: 1px solid var(--wq-card-border);
    background: rgba(127,127,127,.08);
    color: var(--wq-text);
    cursor: pointer;
    display:grid;
    place-items:center;
    user-select:none;
  }
  .wq-pw-eye:hover{
    background: rgba(127,127,127,.12);
  }

  .wq-pw-error{
    display:none;
    margin-top: 10px;
    color: #dc2626;
    font-size: 13px;
  }
  html.dark .wq-pw-error{ color: #fca5a5; }

  .wq-pw-actions{
    padding: 14px 20px 18px;
    display:flex;
    gap: 10px;
    justify-content:flex-end;
    border-top: 1px solid var(--wq-card-border);
    background: rgba(255,255,255,.22);
  }
  html.dark .wq-pw-actions{ background: rgba(255,255,255,.03); }

  .wq-btn{
    border: 1px solid var(--wq-btn-border);
    background: var(--wq-btn-bg);
    color: var(--wq-btn-text);
    border-radius: 14px;
    padding: 10px 14px;
    font-size: 14px;
    font-weight: 700;
    cursor:pointer;
    user-select:none;
    transition: transform .15s ease, opacity .15s ease, background .15s ease;
    text-decoration:none;
    display:inline-flex;
    align-items:center;
    gap: 8px;
  }
  .wq-btn:hover{ transform: translateY(-1px); }
  .wq-btn:active{ transform: translateY(0); opacity:.95; }

  .wq-btn-primary{
    border-color: transparent;
    background: var(--wq-btn-primary-bg);
    color: var(--wq-btn-primary-text);
  }

  @media (max-width: 420px){
    .wq-pw-actions{ flex-direction: column; }
    .wq-btn{ width:100%; justify-content:center; }
    .wq-pw-sub{ margin-left: 0; }
  }
</style>

<div class="wq-pw-mask" id="wqPwMask" aria-hidden="true">
  <div class="wq-pw-card" role="dialog" aria-modal="true" aria-labelledby="wqPwTitle">
    <div class="wq-pw-header">
      <div>
        <div class="wq-pw-title" id="wqPwTitle">
          <div class="wq-pw-badge">ğŸ”’</div>
          è®¿é—®éªŒè¯
        </div>
        <div class="wq-pw-sub">æœ¬é¡µé¢å†…å®¹å—ä¿æŠ¤ã€‚è¯·è¾“å…¥å¯†ç åç»§ç»­è®¿é—®ã€‚</div>
      </div>
    </div>

    <div class="wq-pw-body">
      <div class="wq-pw-field">
        <input
          id="wqPwInput"
          class="wq-pw-input"
          type="password"
          placeholder="è¯·è¾“å…¥è®¿é—®å¯†ç "
          autocomplete="current-password"
        />
        <button class="wq-pw-eye" id="wqPwEye" type="button" aria-label="æ˜¾ç¤ºæˆ–éšè—å¯†ç ">ğŸ‘</button>
      </div>
      <div id="wqPwError" class="wq-pw-error">å¯†ç é”™è¯¯ï¼Œè¯·é‡è¯•ã€‚</div>
    </div>

    <div class="wq-pw-actions">
      <a class="wq-btn" href="/">è¿”å›ä¸»é¡µ</a>
      <button class="wq-btn wq-btn-primary" id="wqPwOk" type="button">ç¡®è®¤è®¿é—®</button>
    </div>
  </div>
</div>

<script>
(function(){
  // ä»æ–‡ç« è°ƒç”¨é‡Œæ‹¿åˆ°å¯†ç ï¼š{{< page-password "xxxx" >}}
  var PASS_RAW = {{ .Get 0 | jsonify }};

  // ç»Ÿä¸€åš trimï¼Œé¿å…ä½ å¤åˆ¶æ—¶å¸¦ç©ºæ ¼/ä¸å¯è§å­—ç¬¦å¯¼è‡´æ°¸è¿œé”™è¯¯
  function normalize(s){
    return String(s || "").trim();
  }
  var PASS = normalize(PASS_RAW);

  var mask = document.getElementById("wqPwMask");
  var input = document.getElementById("wqPwInput");
  var ok = document.getElementById("wqPwOk");
  var err = document.getElementById("wqPwError");
  var eye = document.getElementById("wqPwEye");

  function show(){
    if(!mask) return;
    mask.style.display = "flex";
    mask.classList.add("show");
    mask.setAttribute("aria-hidden", "false");
    document.documentElement.style.overflow = "hidden";
    setTimeout(function(){ if(input) input.focus(); }, 100);
  }

  function hide(){
    if(!mask) return;
    mask.classList.remove("show");
    mask.setAttribute("aria-hidden", "true");
    document.documentElement.style.overflow = "";
    setTimeout(function(){ mask.style.display = "none"; }, 160);
  }

  function check(){
    if(!input) return;
    if(err) err.style.display = "none";

    var typed = normalize(input.value);

    if (typed === PASS){
      hide();
    } else {
      if(err) err.style.display = "block";
      input.focus();
      input.select();
    }
  }

  // æ¯æ¬¡è¿›å…¥é¡µé¢éƒ½å¼¹ï¼ˆä¸å…è®¸ç‚¹å‡»é®ç½©å…³é—­ç»•è¿‡ï¼‰
  window.addEventListener("load", function(){
    show();

    if(ok) ok.addEventListener("click", check);
    if(input) input.addEventListener("keydown", function(e){
      if(e.key === "Enter") check();
      if(e.key === "Escape") { window.location.href = "/"; }
      // ç”¨æˆ·è¾“å…¥æ—¶éšè—é”™è¯¯æç¤º
      if(err) err.style.display = "none";
    });

    // æ˜¾ç¤º/éšè—å¯†ç 
    if(eye) eye.addEventListener("click", function(){
      if(!input) return;
      input.type = (input.type === "password") ? "text" : "password";
      eye.textContent = (input.type === "password") ? "ğŸ‘" : "ğŸ™ˆ";
      input.focus();
    });

    // ç‚¹å‡»é®ç½©ä¸å…³é—­ï¼ˆé˜²ç»•è¿‡ï¼‰
    if(mask) mask.addEventListener("click", function(e){
      if(e.target === mask){
        window.location.href = "/";
      }
    });
  });
})();
</script>
