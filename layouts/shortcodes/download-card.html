<div class="finder-dl" data-url="{{ .Get "url" }}" {{ with .Get "pass" }}data-pass="{{ . }}"{{ end }}>
  <div class="finder-left">
    <div class="finder-icon">ğŸ“</div>
    <div class="finder-text">
      <div class="finder-title">{{ .Get "title" }}</div>
      <div class="finder-sub">{{ .Get "sub" }}</div>
    </div>
  </div>

  {{ if .Get "pass" }}
    <!-- æœ‰å¯†ç ï¼šå…ˆæ˜¾ç¤ºè¾“å…¥æ¡† + è§£é”æŒ‰é’®ï¼Œéšè—ä¸‹è½½æŒ‰é’® -->
    <div class="finder-right">
      <input class="finder-input" type="password" placeholder="è¾“å…¥ä¸‹è½½å¯†ç " />
      <button class="finder-btn finder-unlock" type="button">è§£é”</button>
      <a class="finder-btn finder-download" href="#" target="_blank" rel="noopener" style="display:none;">ä¸‹è½½</a>
    </div>
    <div class="finder-error" style="display:none;">å¯†ç é”™è¯¯</div>
  {{ else }}
    <!-- æ— å¯†ç ï¼šç›´æ¥ä¸‹è½½ -->
    <a class="finder-btn" href="{{ .Get "url" }}" target="_blank" rel="noopener">ä¸‹è½½</a>
  {{ end }}
</div>

<style>
/* ===== Finder é£æ ¼ä¸‹è½½å—ï¼ˆè½»é‡ã€æ— é‡é˜´å½±ï¼‰ ===== */
.finder-dl{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:16px;
  padding:14px 16px;
  margin:24px 0 8px;
  border-radius:14px;
  background:#f6f7f9;
  border:1px solid rgba(0,0,0,.06);
  position: relative;
}

.finder-left{
  display:flex;
  align-items:center;
  gap:12px;
  min-width:0;
}
.finder-icon{ font-size:28px; line-height:1; flex:0 0 auto; }
.finder-text{ min-width:0; }
.finder-title{
  font-size:15px;
  font-weight:600;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.finder-sub{ font-size:12.5px; color:#6b7280; margin-top:2px; }

/* å³ä¾§ï¼šè¾“å…¥æ¡† + æŒ‰é’® */
.finder-right{
  display:flex;
  align-items:center;
  gap:10px;
  flex-wrap:wrap;
  justify-content:flex-end;
}

.finder-input{
  width: 140px;
  padding: 6px 10px;
  border-radius: 10px;
  border: 1px solid rgba(0,0,0,.10);
  background: #fff;
  font-size: 13px;
  outline: none;
}
.finder-input:focus{
  border-color: rgba(37,99,235,.35);
  box-shadow: 0 0 0 4px rgba(37,99,235,.10);
}

.finder-btn{
  padding:6px 14px;
  border-radius:999px;
  font-size:13px;
  font-weight:600;
  background:#e5e7eb;
  color:#111827 !important;
  text-decoration:none !important;
  border:1px solid rgba(0,0,0,.08);
  transition:background .15s ease;
  cursor:pointer;
  user-select:none;
}
.finder-btn:hover{ background:#dbeafe; }

/* é”™è¯¯æç¤º */
.finder-error{
  position:absolute;
  right:16px;
  bottom:-18px;
  font-size:12px;
  color:#dc2626;
}

/* ===== æš—é»‘æ¨¡å¼ ===== */
html.dark .finder-dl{
  background:#1f2933;
  border-color:rgba(255,255,255,.08);
}
html.dark .finder-sub{ color:rgba(209,213,219,.7); }
html.dark .finder-input{
  background: rgba(255,255,255,.06);
  color: rgba(255,255,255,.9);
  border-color: rgba(255,255,255,.12);
}
html.dark .finder-btn{
  background:rgba(255,255,255,.08);
  color:rgba(255,255,255,.9) !important;
  border-color: rgba(255,255,255,.12);
}
html.dark .finder-btn:hover{ background:rgba(147,197,253,.18); }
html.dark .finder-error{ color:#fca5a5; }

@media (max-width: 520px){
  .finder-right{ width:100%; justify-content:flex-start; }
  .finder-input{ width: 100%; }
}
</style>

<script>
(function(){
  // åªå¯¹â€œå¸¦å¯†ç â€çš„ download-card ç”Ÿæ•ˆ
  var cards = document.querySelectorAll('.finder-dl[data-pass]');
  if(!cards.length) return;

  cards.forEach(function(card){
    var PASS = (card.getAttribute('data-pass') || '').trim();
    var URL  = (card.getAttribute('data-url')  || '').trim();

    var input = card.querySelector('.finder-input');
    var unlockBtn = card.querySelector('.finder-unlock');
    var downloadA = card.querySelector('.finder-download');
    var err = card.querySelector('.finder-error');

    function showErr(){
      if(err) err.style.display = 'block';
      setTimeout(function(){ if(err) err.style.display='none'; }, 1200);
    }

    function unlock(){
      var typed = (input && input.value || '').trim();
      if(typed === PASS){
        // è§£é”ï¼šéšè—è¾“å…¥/è§£é”æŒ‰é’®ï¼Œæ˜¾ç¤ºä¸‹è½½æŒ‰é’®å¹¶å¡«å…¥çœŸå®é“¾æ¥
        if(input) input.style.display = 'none';
        if(unlockBtn) unlockBtn.style.display = 'none';
        if(downloadA){
          downloadA.href = URL;
          downloadA.style.display = 'inline-flex';
        }
        if(err) err.style.display = 'none';
      }else{
        showErr();
        if(input){ input.focus(); input.select(); }
      }
    }

    if(unlockBtn) unlockBtn.addEventListener('click', unlock);
    if(input) input.addEventListener('keydown', function(e){
      if(e.key === 'Enter') unlock();
    });
  });
})();
</script>

/* ===== ä¸‹è½½å¡ç‰‡ï¼šç§»åŠ¨ç«¯é€‚é… ===== */
@media (max-width: 640px) {

  .download-card {
    flex-direction: column !important;
    align-items: stretch !important;
    gap: 14px !important;
    padding: 16px !important;
  }

  .download-card-left {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .download-card-title {
    font-size: 15px !important;
    line-height: 1.4 !important;
  }

  .download-card-sub {
    font-size: 13px !important;
    opacity: .8;
  }

  .download-card-input {
    width: 100% !important;
    min-width: 0 !important;
  }

  .download-card-input input {
    width: 100% !important;
    font-size: 15px !important;
  }

  .download-card-button {
    width: 100% !important;
    text-align: center !important;
    font-size: 15px !important;
    padding: 12px 0 !important;
  }
}
