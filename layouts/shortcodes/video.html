<link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />

<style>
    /* 播放器容器：锁定 16:9，直角边框 */
    .video-container-yt {
        max-width: 100%;
        margin: 2rem auto;
        aspect-ratio: 16 / 9;
        background-color: #000;
        /* 如果想要微小的圆角，可以取消下面这行的注释，如 border-radius: 8px; */
        border-radius: 8px; 
        overflow: hidden;
        box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }

    /* --- Plyr 主题定制开始 --- */

    /* 全局主色调改为蓝色 (进度条、音量条、大播放按钮) */
    :root {
        --plyr-color-main: #007aff; /* 你可以修改这个十六进制代码来调整蓝色深浅 */
    }

    /* 底部控制栏背景：模仿 YouTube 的深色半透明渐变通栏 */
    .plyr--video .plyr__controls {
        background: linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75)) !important;
        padding-bottom: 10px;
        padding-top: 20px;
    }

    /* 调整按钮和文字颜色为纯白 */
    .plyr__control, .plyr__time {
        color: #fff !important;
    }
    /* 鼠标悬停在按钮上的背景色，改为微弱的白色透明 */
    .plyr__control:hover {
        background: rgba(255, 255, 255, 0.1) !important;
    }

    /* 优化进度条轨道背景，使其更像截图中的深灰色 */
    .plyr__progress__container .plyr__progress__background {
        background-color: rgba(255, 255, 255, 0.25) !important;
    }

    /* 确保加载动画（转圈）也是蓝色的 */
    .plyr__spinner {
        border-color: rgba(0, 122, 255, 0.3);
        border-top-color: var(--plyr-color-main);
    }
    /* --- Plyr 主题定制结束 --- */
</style>


<div class="video-container-yt">
    <video class="js-player" playsinline controls preload="metadata" data-poster="{{ .Get "poster" }}">
        <source src="{{ .Get "src" }}" type="video/mp4" />
    </video>
</div>


<script src="https://cdn.plyr.io/3.7.8/plyr.js"></script>
<script>
    // 等待 DOM 加载完成
    document.addEventListener('DOMContentLoaded', () => {
        const controlsConfig = [
            'play-large', // 视频中心的大播放按钮
            'play',       // 底部左侧的小播放/暂停按钮
            'progress',   // 进度条
            'current-time', // 当前播放时间 (例如 0:05)
            'duration',     // 总时长 (例如 3:56)
            'mute',       // 音量喇叭图标
            'volume',     // 音量调节滑块
            'fullscreen'  // 全屏按钮
            // 已刻意移除: 'settings'(设置), 'captions'(字幕), 'pip'(画中画), 'airplay'(投屏), 'restart'(重播), 'rewind'(快退), 'fast-forward'(快进)
        ];

        const player = new Plyr('.js-player', {
            controls: controlsConfig, // 应用我们精简后的按钮配置
            // 其他配置
            seekTime: 10, // 左右方向键快进/快退秒数
            i18n: { // 简单的汉化提示
                play: '播放',
                pause: '暂停',
                mute: '静音',
                unmute: '取消静音',
                enableCaptions: '启用字幕',
                disableCaptions: '关闭字幕',
                enterFullscreen: '进入全屏',
                exitFullscreen: '退出全屏',
            }
        });

        // (可选) 调试用：监听正在缓冲事件，确保加载动画正常工作
        player.on('waiting', event => {
             console.log('视频正在缓冲，加载动画应该出现...');
        });
    });
</script>