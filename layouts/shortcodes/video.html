<link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />

<style>
    /* 1. 容器外观：强制 16:9 比例与统一圆角 */
    .custom-video-wrapper {
        width: 100%;
        max-width: 900px; /* 你可以根据博客正文宽度调整 */
        margin: 2rem auto;
        border-radius: 12px; /* 统一小圆角 */
        overflow: hidden;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
        background: #000;
        aspect-ratio: 16 / 9; /* 锁定长宽比 */
        position: relative;
    }

    /* 2. 这里的变量控制全局配色为“科技蓝” */
    .plyr--video {
        --plyr-color-main: #007aff; /* 蓝色主题 */
        --plyr-video-background: #000;
        height: 100%;
    }

    /* 3. 自定义缓冲动画 (Loading Spinner) */
    .plyr--loading .plyr__video-wrapper::after {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        width: 40px;
        height: 40px;
        margin: -20px 0 0 -20px;
        border: 3px solid rgba(255, 255, 255, 0.3);
        border-top-color: #007aff;
        border-radius: 50%;
        animation: plyr-spinner 0.8s linear infinite;
        z-index: 10;
    }

    @keyframes plyr-spinner {
        to { transform: rotate(360deg); }
    }

    /* 4. 优化控制栏：YouTube 风格的简洁感 */
    .plyr__control--overlaid {
        background: rgba(0, 122, 255, 0.8); /* 中间播放按钮颜色 */
    }
    
    .plyr__controls {
        padding: 10px 15px !important;
        background: linear-gradient(transparent, rgba(0,0,0,0.7)) !important;
    }

    /* 强制视频填充容器，不随视频原尺寸改变高度 */
    .custom-video-wrapper video {
        width: 100%;
        height: 100%;
        object-fit: cover; 
    }
</style>

<div class="custom-video-wrapper">
    <video class="js-player" playsinline controls preload="metadata" data-poster="{{ .Get "poster" }}">
        <source src="{{ .Get "src" }}" type="video/mp4" />
        您的浏览器不支持播放该视频。
    </video>
</div>

<script src="https://cdn.plyr.io/3.7.8/plyr.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const player = new Plyr('.js-player', {
            // 配置选项
            controls: [
                'play-large', 'play', 'progress', 'current-time', 
                'mute', 'volume', 'settings', 'fullscreen'
            ],
            settings: ['speed', 'quality'],
            speed: { selected: 1, options: [0.5, 0.75, 1, 1.25, 1.5, 2] },
            tooltips: { controls: true, seek: true }
        });

        // 监听缓冲状态
        player.on('waiting', () => {
            console.log('Video is buffering...');
        });
    });
</script>