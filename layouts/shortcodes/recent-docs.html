{{/* =========================
  WQ recent docs (Home)
  - 仅用于首页“最近更新”模块
  - UI：更克制（无阴影/黑色标题/按钮不突兀）
  - 你可改的地方：搜索 “可改：”
========================= */}}

{{- $limit := 5 -}} {{/* 可改：显示条数 */}}
{{- with .Get "limit" -}}{{- $limit = (int .) -}}{{- end -}}

{{- $pages := where .Site.RegularPages "Section" "docs" -}}
{{- $pages = $pages.ByDate.Reverse -}}

<style>
  /* ===== 容器：无阴影、贴合主页 ===== */
  .wq-recent-wrap{ margin-top: 10px; }
  .wq-recent-list{ display:flex; flex-direction:column; gap:12px; }

  /* 单条卡片：无阴影（主页其他模块也无阴影） */
  .wq-recent-item{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
    padding:12px 14px;
    border:1px solid rgba(0,0,0,.08);
    border-radius:14px;
    background: rgba(255,255,255,.55);
    text-decoration:none !important;
  }
  .wq-recent-item:hover{
    border-color: rgba(37,99,235,.14);
    background: rgba(37,99,235,.03);
  }

  /* 左侧：图标+日期+标题（确保同一行对齐） */
  .wq-recent-left{
    display:flex;
    align-items:center;
    gap:12px;
    min-width:0;
  }
  .wq-recent-dot{
    width:10px;height:10px;border-radius:999px;
    background: rgba(37,99,235,.55);
    box-shadow: 0 0 0 4px rgba(37,99,235,.10);
    flex:0 0 auto;
  }
  .wq-recent-date{
    font-size:12.5px;
    color: rgba(100,116,139,1);
    padding:2px 8px;
    border-radius:999px;
    background: rgba(148,163,184,.16);
    font-variant-numeric: tabular-nums;
    flex:0 0 auto;
  }

  /* 标题：改为黑色 + 缩小一号（你要求） */
  .wq-recent-title{
    font-size:15px;          /* 可改：标题字号 */
    font-weight:850;
    color: rgba(15,23,42,.92);  /* 黑色系 */
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
    min-width:0;
  }

  /* 右侧“查看”：弱化、可删（不突兀） */
  .wq-recent-right{
    flex:0 0 auto;
    display:flex;
    align-items:center;
    gap:8px;
    color: rgba(100,116,139,1);
    font-size:13px;
    font-weight:750;
    white-space:nowrap;
    opacity:.9;
  }
  .wq-recent-right .arr{ opacity:.75; }

  /* 底部：查看全部文章（不要太圆角，接近原版） */
  .wq-recent-footer{
    display:flex;
    justify-content:flex-end;
    margin-top: 14px;
  }
  .wq-recent-more{
    display:inline-flex;
    align-items:center;
    gap:8px;
    padding:8px 12px;
    border-radius:10px;              /* ✅ 比之前小、克制 */
    border:1px solid rgba(0,0,0,.10);
    background: rgba(255,255,255,.55);
    color: rgba(15,23,42,.82);
    text-decoration:none !important;
    font-size:13px;
    font-weight:800;
  }
  .wq-recent-more:hover{
    border-color: rgba(37,99,235,.18);
    background: rgba(37,99,235,.04);
    color: rgba(29,78,216,1);
  }

  /* ===== 暗黑模式适配 ===== */
  @media (prefers-color-scheme: dark){
    .wq-recent-item{
      border-color: rgba(255,255,255,.10);
      background: rgba(24,24,27,.50);
    }
    .wq-recent-item:hover{
      border-color: rgba(96,165,250,.22);
      background: rgba(96,165,250,.08);
    }
    .wq-recent-date{
      background: rgba(255,255,255,.08);
      color: rgba(209,213,219,.80);
    }
    .wq-recent-title{
      color: rgba(255,255,255,.92); /* 暗黑下标题为白 */
    }
    .wq-recent-right{
      color: rgba(209,213,219,.75);
    }
    .wq-recent-dot{
      background: rgba(96,165,250,.65);
      box-shadow: 0 0 0 4px rgba(96,165,250,.14);
    }
    .wq-recent-more{
      border-color: rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.86);
    }
    .wq-recent-more:hover{
      border-color: rgba(96,165,250,.22);
      background: rgba(96,165,250,.10);
      color: rgba(191,219,254,1);
    }
  }

  /* ===== 手机端：更紧凑 ===== */
  @media (max-width: 520px){
    .wq-recent-item{ padding:10px 12px; border-radius:14px; }
    .wq-recent-title{ font-size:14.5px; }
    .wq-recent-right{ font-size:12.5px; }
  }
</style>

<div class="wq-recent-wrap">
  <div class="wq-recent-list">
    {{ range first $limit $pages }}
      <a class="wq-recent-item" href="{{ .RelPermalink }}">
        <div class="wq-recent-left">
          <span class="wq-recent-dot" aria-hidden="true"></span>
          <span class="wq-recent-date">{{ (cond (gt (.Lastmod.Unix) 0) (.Lastmod.Format "2006-01-02") (.Date.Format "2006-01-02")) }}</span>
          <span class="wq-recent-title">{{ .Title }}</span>
        </div>

        <!-- 可改：如果你不想要“查看”两个字，删掉下面这段 div 即可 -->
        <div class="wq-recent-right" aria-hidden="true">
          <span>查看</span><span class="arr">→</span>
        </div>
      </a>
    {{ end }}
  </div>

  <div class="wq-recent-footer">
    <!-- 可改：这里跳转到 docs 列表页 -->
    <a class="wq-recent-more" href="/docs/">
      查看全部文章 <span class="arr">→</span>
    </a>
  </div>
</div>