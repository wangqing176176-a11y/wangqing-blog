<script>
  document.addEventListener("DOMContentLoaded", function () {
    // 只在首页弹窗
    if (window.location.pathname !== "/") return;

    const overlay = document.createElement("div");
    overlay.id = "wq-notice-overlay";
    overlay.innerHTML = `
      <div style="
        position:fixed; inset:0;
        background:rgba(0,0,0,.45);
        display:flex; align-items:center; justify-content:center;
        z-index:9999; padding:16px;">
        <div style="
          background:#fff;
          width:min(560px, 92vw);
          max-height:80vh;
          overflow:auto;
          padding:26px 24px;
          border-radius:18px;
          box-shadow:0 20px 60px rgba(0,0,0,.25);
          color:#111827;
          line-height:1.8;
          font-size:15px;">
          <div style="display:flex; align-items:center; justify-content:space-between; gap:12px;">
            <h3 style="margin:0; font-size:18px;">使用须知</h3>
            <button id="wq-notice-x" aria-label="关闭" style="
              border:none; background:transparent; cursor:pointer;
              font-size:20px; line-height:1; padding:6px 10px; color:#6b7280;">×</button>
          </div>

          <p style="margin:12px 0 6px;">
            使用本网站前，请务必阅读
            <a href="/about/" style="color:#2563eb; font-weight:700; text-decoration:none;">关于</a>
            页面。
          </p>
          <p style="margin:0; color:#6b7280;">
            继续访问、阅读或下载本站内容，即视为您已理解并同意相关说明与约定。
          </p>

          <div style="display:flex; justify-content:flex-end; margin-top:18px;">
            <button id="wq-notice-ok" style="
              border:1px solid #e5e7eb;
              background:#f9fafb;
              color:#111827;
              padding:10px 16px;
              border-radius:999px;
              cursor:pointer;">
              我已知晓
            </button>
          </div>
        </div>
      </div>
    `;

    document.body.appendChild(overlay);

    function closeNotice() {
      const el = document.getElementById("wq-notice-overlay");
      if (el) el.remove();
    }

    document.getElementById("wq-notice-ok").addEventListener("click", closeNotice);
    document.getElementById("wq-notice-x").addEventListener("click", closeNotice);
    overlay.addEventListener("click", (e) => {
      if (e.target === overlay.firstElementChild) closeNotice();
    });
  });
</script>
