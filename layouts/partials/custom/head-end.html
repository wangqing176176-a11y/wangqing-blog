<!-- ===== Apple é£ï¼šé¦–é¡µè®¿é—®æç¤ºå¼¹çª—ï¼ˆä»…é¦–é¡µ + é¦–æ¬¡è®¿é—®ï¼‰ ===== -->
<style>
  :root{
    --wq-mask: rgba(0,0,0,.38);
    --wq-card-bg: rgba(255,255,255,.78);
    --wq-card-border: rgba(0,0,0,.08);
    --wq-text: rgba(17,24,39,.95);
    --wq-subtext: rgba(17,24,39,.68);
    --wq-link: #2563eb;
    --wq-shadow: 0 24px 60px rgba(0,0,0,.18);
    --wq-radius: 20px;
    --wq-btn-bg: #111827;
    --wq-btn-text: #fff;
    --wq-btn-ghost-bg: rgba(17,24,39,.06);
    --wq-btn-ghost-text: rgba(17,24,39,.88);
  }

  /* é€‚é…æš—é»‘ï¼šHextra é€šå¸¸ä¼šåœ¨ html ä¸ŠåŠ  .dark */
  html.dark {
    --wq-mask: rgba(0,0,0,.55);
    --wq-card-bg: rgba(24,24,27,.72);
    --wq-card-border: rgba(255,255,255,.10);
    --wq-text: rgba(255,255,255,.92);
    --wq-subtext: rgba(255,255,255,.68);
    --wq-link: #7aa2ff;
    --wq-shadow: 0 24px 70px rgba(0,0,0,.45);
    --wq-btn-bg: rgba(255,255,255,.92);
    --wq-btn-text: rgba(0,0,0,.88);
    --wq-btn-ghost-bg: rgba(255,255,255,.10);
    --wq-btn-ghost-text: rgba(255,255,255,.88);
  }

  /* å¦‚æœä¸»é¢˜ä¸æ˜¯ .darkï¼Œä¹Ÿå…¼å®¹ç³»ç»Ÿæš—é»‘åå¥½ */
  @media (prefers-color-scheme: dark) {
    html:not(.light) {
      --wq-mask: rgba(0,0,0,.55);
      --wq-card-bg: rgba(24,24,27,.72);
      --wq-card-border: rgba(255,255,255,.10);
      --wq-text: rgba(255,255,255,.92);
      --wq-subtext: rgba(255,255,255,.68);
      --wq-link: #7aa2ff;
      --wq-shadow: 0 24px 70px rgba(0,0,0,.45);
      --wq-btn-bg: rgba(255,255,255,.92);
      --wq-btn-text: rgba(0,0,0,.88);
      --wq-btn-ghost-bg: rgba(255,255,255,.10);
      --wq-btn-ghost-text: rgba(255,255,255,.88);
    }
  }

  .wq-modal {
    position: fixed;
    inset: 0;
    z-index: 9999;
    display: none;
    align-items: center;
    justify-content: center;
    padding: 18px;
    background: var(--wq-mask);
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
  }

  .wq-card {
    width: min(560px, 100%);
    background: var(--wq-card-bg);
    border: 1px solid var(--wq-card-border);
    border-radius: var(--wq-radius);
    box-shadow: var(--wq-shadow);
    overflow: hidden;
    transform: translateY(8px) scale(.98);
    opacity: 0;
    transition: transform .25s ease, opacity .25s ease;
  }
  .wq-modal.show .wq-card {
    transform: translateY(0) scale(1);
    opacity: 1;
  }

  .wq-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 18px 18px 10px;
  }
  .wq-title {
    display: flex;
    gap: 10px;
    align-items: center;
    font-size: 16px;
    font-weight: 700;
    color: var(--wq-text);
    letter-spacing: .2px;
  }
  .wq-badge {
    width: 34px; height: 34px;
    border-radius: 12px;
    display: grid;
    place-items: center;
    background: rgba(255,255,255,.55);
    border: 1px solid var(--wq-card-border);
  }
  html.dark .wq-badge { background: rgba(255,255,255,.10); }

  .wq-body {
    padding: 0 18px 16px;
    color: var(--wq-text);
    font-size: 14.5px;
    line-height: 1.75;
  }
  .wq-body p { margin: 10px 0; }
  .wq-body a {
    color: var(--wq-link);
    font-weight: 650;
    text-decoration: none;
  }
  .wq-body a:hover { text-decoration: underline; }

  .wq-note {
    margin-top: 12px;
    padding: 12px 12px;
    border-radius: 14px;
    border: 1px solid var(--wq-card-border);
    background: rgba(255,255,255,.45);
    color: var(--wq-subtext);
    font-size: 13.5px;
  }
  html.dark .wq-note { background: rgba(255,255,255,.06); }

  /* âœ… å‹¾é€‰è¡Œï¼ˆåªæ–°å¢æ ·å¼ï¼Œä¸ç ´ååŸ UIï¼‰ */
  .wq-agree-row{
    display:flex;
    align-items:flex-start;
    gap:10px;
    cursor:pointer;
    user-select:none;
  }
  .wq-agree-row input{
    margin-top:3px;
    width:16px;
    height:16px;
    accent-color: var(--wq-link);
    flex: 0 0 auto;
  }
  .wq-agree-row span{
    color: var(--wq-subtext);
    line-height: 1.6;
  }

  .wq-actions {
    display: flex;
    gap: 10px;
    justify-content: flex-end;
    padding: 14px 18px 18px;
    border-top: 1px solid var(--wq-card-border);
    background: rgba(255,255,255,.25);
  }
  html.dark .wq-actions { background: rgba(255,255,255,.03); }

  .wq-btn {
    border: 1px solid var(--wq-card-border);
    border-radius: 14px;
    padding: 10px 14px;
    font-size: 14px;
    cursor: pointer;
    transition: transform .15s ease, opacity .15s ease;
    user-select: none;
  }
  .wq-btn:hover { transform: translateY(-1px); }

  .wq-btn-ghost {
    background: var(--wq-btn-ghost-bg);
    color: var(--wq-btn-ghost-text);
  }
  .wq-btn-primary {
    background: var(--wq-btn-bg);
    color: var(--wq-btn-text);
    border-color: transparent;
  }

  /* âœ… ç¦ç”¨æ€ï¼ˆä¸æ”¹å˜æ•´ä½“ UIï¼Œåªè®©æŒ‰é’®ç°ä¸€ç‚¹ï¼‰ */
  .wq-btn[disabled]{
    opacity: .55;
    cursor: not-allowed;
    transform: none !important;
  }

  @media (max-width: 420px) {
    .wq-actions { flex-direction: column; }
    .wq-btn { width: 100%; }
  }
</style>

<div class="wq-modal" id="wqModal" aria-hidden="true">
  <div class="wq-card" role="dialog" aria-modal="true" aria-labelledby="wqModalTitle">
    <div class="wq-header">
      <div class="wq-title" id="wqModalTitle">
        <div class="wq-badge">ğŸ“Œ</div>
        è®¿é—®æç¤º
      </div>
    </div>

    <div class="wq-body">
      <p>
        ä½¿ç”¨æœ¬ç«™å‰ï¼Œè¯·å…ˆé˜…è¯»
        <a href="/about/">å…³äº</a>
        é¡µé¢ä¸­çš„å…è´£å£°æ˜ä¸ç”¨æˆ·åè®®ã€‚
      </p>
      <p>
        ä¸ºé¿å…è¯¯è§£ï¼Œè¯·åœ¨ç¡®è®¤é˜…è¯»åå†ç»§ç»­è®¿é—®æœ¬ç«™å†…å®¹ã€‚
      </p>

      <!-- âœ… çº¢æ¡†åŒºåŸŸï¼šæ”¹ä¸ºå¿…é¡»ä¸»åŠ¨å‹¾é€‰ -->
      <div class="wq-note">
        <label class="wq-agree-row">
          <input id="wqAgree" type="checkbox" />
          <span>
            æˆ‘å·²é˜…è¯»å¹¶ç†è§£ <a href="/about/">ã€Šå…³äºã€‹</a>ï¼Œ
            å¹¶è‡ªæ„¿ç»§ç»­è®¿é—®ã€‚
          </span>
        </label>
      </div>
    </div>

    <div class="wq-actions">
      <a class="wq-btn wq-btn-ghost" href="/about/">æŸ¥çœ‹å…³äº</a>
      <button class="wq-btn wq-btn-primary" type="button" id="wqModalOk" disabled>è¿›å…¥ç½‘ç«™</button>
    </div>
  </div>
</div>

<script>
  (function () {
    // ä»…é¦–é¡µ
    var path = location.pathname || "/";
    var isHome = (path === "/" || path === "/index.html");
    if (!isHome) return;

    // é¦–æ¬¡è®¿é—®å¼¹ä¸€æ¬¡ï¼ˆå¯æ”¹ key æ¥å¼ºåˆ¶å†å¼¹ï¼‰
    var KEY = "wq_first_visit_modal_v1";
    if (localStorage.getItem(KEY) === "1") return;

    var modal = document.getElementById("wqModal");
    var ok = document.getElementById("wqModalOk");
    var agree = document.getElementById("wqAgree");

    // âœ… ä¿®å¤ï¼šä¸è¦å¼•ç”¨ä¸å­˜åœ¨çš„ close
    if (!modal || !ok || !agree) return;

    // åˆå§‹ç¦ç”¨ OKï¼ˆå·²åœ¨ HTML disabledï¼Œè¿™é‡Œè¡¥ä¸€å±‚ä¿é™©ï¼‰
    ok.disabled = true;

    function show() {
      modal.style.display = "flex";
      modal.classList.add("show");
      modal.setAttribute("aria-hidden", "false");
      try { document.body.style.overflow = "hidden"; } catch(e){}
    }

    function hide() {
      // âœ… å¿…é¡»å‹¾é€‰æ‰èƒ½å…³é—­
      if (!agree.checked) return;

      modal.classList.remove("show");
      modal.setAttribute("aria-hidden", "true");
      try { document.body.style.overflow = ""; } catch(e){}
      setTimeout(function(){ modal.style.display = "none"; }, 180);
      localStorage.setItem(KEY, "1");
    }

    // å‹¾é€‰åå¯ç”¨æŒ‰é’®
    agree.addEventListener("change", function(){
      ok.disabled = !agree.checked;
    });

    ok.addEventListener("click", hide);

    // âœ… é˜²ç»•è¿‡ï¼šç‚¹å‡»é®ç½©/ESC ä»…åœ¨å‹¾é€‰åå…è®¸å…³é—­
    modal.addEventListener("click", function(e){
      if (e.target === modal) hide();
    });
    document.addEventListener("keydown", function(e){
      if (e.key === "Escape") hide();
    });

    show();
  })();
</script>
<!-- ===== å¼¹çª—ç»“æŸ ===== -->
