<!-- ===== Apple é£ï¼šé¦–é¡µè®¿é—®æç¤ºå¼¹çª—ï¼ˆä»…é¦–é¡µ + é¦–æ¬¡è®¿é—®ï¼‰ ===== -->
<style>
  :root{
    --wq-mask: rgba(0,0,0,.38);
    --wq-card-bg: rgba(255,255,255,.78);
    --wq-card-border: rgba(0,0,0,.08);
    --wq-text: rgba(17,24,39,.95);
    --wq-subtext: rgba(17,24,39,.68);
    --wq-link: #2563eb;
    --wq-shadow: 0 24px 60px rgba(0,0,0,.18);
    --wq-radius: 20px;
    --wq-btn-bg: #111827;
    --wq-btn-text: #fff;
    --wq-btn-ghost-bg: rgba(17,24,39,.06);
    --wq-btn-ghost-text: rgba(17,24,39,.88);
  }

  html.dark{
    --wq-mask: rgba(0,0,0,.55);
    --wq-card-bg: rgba(24,24,27,.72);
    --wq-card-border: rgba(255,255,255,.10);
    --wq-text: rgba(255,255,255,.92);
    --wq-subtext: rgba(255,255,255,.68);
    --wq-link: #7aa2ff;
    --wq-shadow: 0 24px 70px rgba(0,0,0,.45);
    --wq-btn-bg: rgba(255,255,255,.92);
    --wq-btn-text: rgba(0,0,0,.88);
    --wq-btn-ghost-bg: rgba(255,255,255,.10);
    --wq-btn-ghost-text: rgba(255,255,255,.88);
  }

  .wq-modal{
    position: fixed;
    inset: 0;
    z-index: 9999;
    display: none;
    align-items: center;
    justify-content: center;
    padding: 18px;
    background: var(--wq-mask);
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
  }

  .wq-card{
    width: min(560px,100%);
    background: var(--wq-card-bg);
    border: 1px solid var(--wq-card-border);
    border-radius: var(--wq-radius);
    box-shadow: var(--wq-shadow);
    overflow: hidden;
    transform: translateY(10px) scale(.98);
    opacity: 0;
    transition: transform .25s ease, opacity .25s ease;
  }

  .wq-modal.show .wq-card{
    transform: translateY(0) scale(1);
    opacity: 1;
  }

  /* è½»å¾®éœ‡åŠ¨åé¦ˆ */
  .wq-shake{
    animation: wq-shake .28s ease;
  }
  @keyframes wq-shake{
    0%{transform:translateX(0)}
    25%{transform:translateX(-4px)}
    50%{transform:translateX(4px)}
    75%{transform:translateX(-3px)}
    100%{transform:translateX(0)}
  }

  .wq-header{
    padding: 18px 18px 10px;
  }
  .wq-title{
    display:flex;
    align-items:center;
    gap:10px;
    font-size:16px;
    font-weight:700;
    color:var(--wq-text);
  }
  .wq-badge{
    width:34px;height:34px;
    border-radius:12px;
    display:grid;
    place-items:center;
    background:rgba(255,255,255,.55);
    border:1px solid var(--wq-card-border);
  }
  html.dark .wq-badge{background:rgba(255,255,255,.10)}

  .wq-body{
    padding:0 18px 16px;
    font-size:14.5px;
    line-height:1.75;
    color:var(--wq-text);
  }
  .wq-body p{margin:10px 0}
  .wq-body a{
    color:var(--wq-link);
    font-weight:600;
    text-decoration:none;
  }

  .wq-note{
    margin-top:12px;
    padding:12px;
    border-radius:14px;
    border:1px solid var(--wq-card-border);
    background:rgba(255,255,255,.45);
  }
  html.dark .wq-note{background:rgba(255,255,255,.06)}

  .wq-agree-row{
    display:flex;
    gap:10px;
    cursor:pointer;
    user-select:none;
  }
  .wq-agree-row input{
    margin-top:3px;
    width:16px;height:16px;
    accent-color:var(--wq-link);
  }
  .wq-agree-row span{
    color:var(--wq-subtext);
    line-height:1.6;
  }

  .wq-actions{
    padding:14px 18px 18px;
    display:flex;
    gap:10px;
    justify-content:flex-end;
    border-top:1px solid var(--wq-card-border);
    background:rgba(255,255,255,.25);
  }
  html.dark .wq-actions{background:rgba(255,255,255,.03)}

  .wq-btn{
    border:1px solid var(--wq-card-border);
    border-radius:14px;
    padding:10px 14px;
    font-size:14px;
    cursor:pointer;
  }
  .wq-btn-ghost{
    background:var(--wq-btn-ghost-bg);
    color:var(--wq-btn-ghost-text);
  }
  .wq-btn-primary{
    background:var(--wq-btn-bg);
    color:var(--wq-btn-text);
    border-color:transparent;
  }
  .wq-btn[disabled]{
    opacity:.55;
    cursor:not-allowed;
  }
</style>

<div class="wq-modal" id="wqModal" aria-hidden="true">
  <div class="wq-card" id="wqCard">
    <div class="wq-header">
      <div class="wq-title">
        <div class="wq-badge">ğŸ“Œ</div>
        è®¿é—®æç¤º
      </div>
    </div>

    <div class="wq-body">
      <p>
        ä½¿ç”¨æœ¬ç«™å‰ï¼Œè¯·å…ˆé˜…è¯»
        <a href="/about/">ã€Šå…³äºã€‹</a>
        é¡µé¢ä¸­çš„å…è´£å£°æ˜ä¸ç”¨æˆ·ä½¿ç”¨åè®®ã€‚
      </p>
      <p>è¯·ç¡®è®¤ç†è§£åå†ç»§ç»­è®¿é—®æœ¬ç«™å†…å®¹ã€‚</p>

      <div class="wq-note">
        <label class="wq-agree-row">
          <input id="wqAgree" type="checkbox">
          <span>
            æˆ‘å·²é˜…è¯»å¹¶ç†è§£ç›¸å…³è¯´æ˜ï¼Œå¹¶è‡ªæ„¿ç»§ç»­è®¿é—®æœ¬ç«™ã€‚
          </span>
        </label>
      </div>
    </div>

    <div class="wq-actions">
      <a class="wq-btn wq-btn-ghost" href="/about/">æŸ¥çœ‹å…³äº</a>
      <button class="wq-btn wq-btn-primary" id="wqModalOk" disabled>
        è¿›å…¥ç½‘ç«™
      </button>
    </div>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function () {
  var path = location.pathname || "/";
  if (path !== "/" && path !== "/index.html") return;

  var KEY = "wq_first_visit_modal_v1";
  if (localStorage.getItem(KEY) === "1") return;

  var modal = document.getElementById("wqModal");
  var card = document.getElementById("wqCard");
  var ok = document.getElementById("wqModalOk");
  var agree = document.getElementById("wqAgree");

  if (!modal || !card || !ok || !agree) return;

  ok.disabled = true;

  function show(){
    modal.style.display = "flex";
    requestAnimationFrame(function(){
      modal.classList.add("show");
    });
    document.documentElement.style.overflow = "hidden";
  }

  function shake(){
    card.classList.remove("wq-shake");
    card.offsetWidth;
    card.classList.add("wq-shake");
  }

  function hide(){
    if (!agree.checked){
      shake();
      return;
    }
    modal.classList.remove("show");
    document.documentElement.style.overflow = "";
    setTimeout(function(){
      modal.style.display = "none";
    },200);
    localStorage.setItem(KEY,"1");
  }

  agree.addEventListener("change",function(){
    ok.disabled = !agree.checked;
  });

  ok.addEventListener("click", hide);

  modal.addEventListener("click",function(e){
    if (e.target === modal) hide();
  });

  document.addEventListener("keydown",function(e){
    if (e.key === "Escape") hide();
  });

  show();
});
</script>
<!-- ===== å¼¹çª—ç»“æŸ ===== -->

<!-- ===== Force banner show on every refresh ===== -->
<script>
(function () {
  // 1) æ¸…æ‰â€œå…³é—­æ¨ªå¹…â€çš„è®°å¿†ï¼ˆHextra ç”¨çš„æ˜¯ banner-closedï¼‰
  try { localStorage.removeItem("banner-closed"); } catch(e) {}

  // 2) å¦‚æœä¸»é¢˜å·²ç»å› ä¸ºâ€œå…³é—­è®°å¿†â€æŠŠæ¨ªå¹…éšè—äº†ï¼Œè¿™é‡Œå¼ºåˆ¶æ¢å¤
  document.addEventListener("DOMContentLoaded", function () {
    try {
      document.documentElement.classList.remove("hextra-banner-hidden");
      document.documentElement.style.removeProperty("--hextra-banner-height");
    } catch(e) {}
  });
})();
</script>
<!-- ===== /Force banner show on every refresh ===== -->


<!-- ===== Blog banner: mobile marquee (Hextra official banner) ===== -->
<style>
  @media (max-width: 520px) {
    /* åªåœ¨æ‰‹æœºç«¯å¯ç”¨æ»šåŠ¨ */
    .wq-banner-marquee {
      overflow: hidden !important;
      white-space: nowrap !important;
    }
    .wq-banner-marquee-inner {
      display: inline-block;
      padding-left: 100%;
      animation: wqBlogBannerMarquee 14s linear infinite;
      will-change: transform;
    }
    @keyframes wqBlogBannerMarquee {
      0% { transform: translateX(0); }
      100% { transform: translateX(-100%); }
    }

    /* å…³é—­æŒ‰é’®ä¿æŒå¯ç‚¹ï¼ˆé˜²æ­¢è¢«æ»šåŠ¨å±‚ç›–ä½ï¼‰ */
    .hextra-banner button,
    .hextra-banner .hextra-banner-close {
      position: relative;
      z-index: 2;
    }

    @media (prefers-reduced-motion: reduce) {
      .wq-banner-marquee-inner {
        animation: none !important;
        padding-left: 0 !important;
        transform: none !important;
      }
    }
  }
</style>

<script>
(function(){
  function enableMarquee(){
    if (window.innerWidth > 520) return;

    var banner = document.querySelector('.hextra-banner');
    if (!banner) return;

    // é˜²æ­¢é‡å¤åŒ…è£¹
    if (banner.querySelector('.wq-banner-marquee')) return;

    // Hextra banner é‡Œä¸€èˆ¬æ˜¯ï¼šæ–‡æœ¬å®¹å™¨ + å…³é—­æŒ‰é’®
    // æˆ‘ä»¬æ‰¾åˆ°â€œæœ€åƒæ–‡æœ¬â€çš„é‚£ä¸ªå®¹å™¨ï¼šä¼˜å…ˆæ‰¾ p / divï¼ˆéæŒ‰é’®ã€é svgã€é kbdï¼‰
    var candidates = Array.prototype.slice.call(banner.querySelectorAll('p, div, span'));
    candidates = candidates.filter(function(el){
      if (!el || !el.textContent) return false;
      var t = el.textContent.trim();
      if (!t) return false;
      // æ’é™¤æ˜æ˜¾çš„æ§åˆ¶å…ƒç´ 
      var tag = el.tagName.toLowerCase();
      if (tag === 'button' || tag === 'svg' || tag === 'kbd') return false;
      if (el.closest('button')) return false;
      // æ–‡æœ¬é•¿åº¦å¤Ÿé•¿æ‰æ»šåŠ¨ï¼ˆå¤ªçŸ­ä¸æ»šï¼‰
      return t.length >= 14;
    });

    if (!candidates.length) return;

    // é€‰ç¬¬ä¸€ä¸ªæœ€ç¬¦åˆçš„æ–‡æœ¬å—
    var textEl = candidates[0];

    // æŠŠ textEl çš„å†…å®¹åŒ…èµ·æ¥åš marquee
    var wrap = document.createElement('span');
    wrap.className = 'wq-banner-marquee';
    var inner = document.createElement('span');
    inner.className = 'wq-banner-marquee-inner';

    // æŠŠåŸå†…å®¹ç§»åŠ¨è¿›å»ï¼ˆä¿ç•™é“¾æ¥/åŠ ç²—ç­‰ï¼‰
    while (textEl.firstChild) inner.appendChild(textEl.firstChild);
    wrap.appendChild(inner);

    // æ¸…ç©ºå¹¶æ’å…¥
    textEl.appendChild(wrap);
  }

  // é¡µé¢åŠ è½½åå¯ç”¨
  document.addEventListener('DOMContentLoaded', enableMarquee);

  // iOS æ¨ªç«–å±åˆ‡æ¢æ—¶å†è·‘ä¸€æ¬¡
  window.addEventListener('resize', function(){
    // ç®€å•èŠ‚æµ
    clearTimeout(window.__wqBannerResizeTimer);
    window.__wqBannerResizeTimer = setTimeout(enableMarquee, 120);
  });
})();
</script>
<!-- ===== /Blog banner: mobile marquee ===== -->
