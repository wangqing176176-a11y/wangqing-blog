<!-- ===== Apple é£ï¼šé¦–é¡µè®¿é—®æç¤ºå¼¹çª—ï¼ˆä»…é¦–é¡µ + é¦–æ¬¡è®¿é—®ï¼‰ ===== -->
<style>
  :root{
    --wq-mask: rgba(0,0,0,.38);
    --wq-card-bg: rgba(255,255,255,.78);
    --wq-card-border: rgba(0,0,0,.08);
    --wq-text: rgba(17,24,39,.95);
    --wq-subtext: rgba(17,24,39,.68);
    --wq-link: #2563eb;
    --wq-shadow: 0 24px 60px rgba(0,0,0,.18);
    --wq-radius: 20px;
    --wq-btn-bg: #111827;
    --wq-btn-text: #fff;
    --wq-btn-ghost-bg: rgba(17,24,39,.06);
    --wq-btn-ghost-text: rgba(17,24,39,.88);
  }

  html.dark{
    --wq-mask: rgba(0,0,0,.55);
    --wq-card-bg: rgba(24,24,27,.72);
    --wq-card-border: rgba(255,255,255,.10);
    --wq-text: rgba(255,255,255,.92);
    --wq-subtext: rgba(255,255,255,.68);
    --wq-link: #7aa2ff;
    --wq-shadow: 0 24px 70px rgba(0,0,0,.45);
    --wq-btn-bg: rgba(255,255,255,.92);
    --wq-btn-text: rgba(0,0,0,.88);
    --wq-btn-ghost-bg: rgba(255,255,255,.10);
    --wq-btn-ghost-text: rgba(255,255,255,.88);
  }

  .wq-modal{
    position: fixed;
    inset: 0;
    z-index: 9999;
    display: none;
    align-items: center;
    justify-content: center;
    padding: 18px;
    background: var(--wq-mask);
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
  }

  .wq-card{
    width: min(560px,100%);
    background: var(--wq-card-bg);
    border: 1px solid var(--wq-card-border);
    border-radius: var(--wq-radius);
    box-shadow: var(--wq-shadow);
    overflow: hidden;
    transform: translateY(10px) scale(.98);
    opacity: 0;
    transition: transform .25s ease, opacity .25s ease;
  }

  .wq-modal.show .wq-card{
    transform: translateY(0) scale(1);
    opacity: 1;
  }

  /* è½»å¾®éœ‡åŠ¨åé¦ˆ */
  .wq-shake{
    animation: wq-shake .28s ease;
  }
  @keyframes wq-shake{
    0%{transform:translateX(0)}
    25%{transform:translateX(-4px)}
    50%{transform:translateX(4px)}
    75%{transform:translateX(-3px)}
    100%{transform:translateX(0)}
  }

  .wq-header{
    padding: 18px 18px 10px;
  }
  .wq-title{
    display:flex;
    align-items:center;
    gap:10px;
    font-size:16px;
    font-weight:700;
    color:var(--wq-text);
  }
  .wq-badge{
    width:34px;height:34px;
    border-radius:12px;
    display:grid;
    place-items:center;
    background:rgba(255,255,255,.55);
    border:1px solid var(--wq-card-border);
  }
  html.dark .wq-badge{background:rgba(255,255,255,.10)}

  .wq-body{
    padding:0 18px 16px;
    font-size:14.5px;
    line-height:1.75;
    color:var(--wq-text);
  }
  .wq-body p{margin:10px 0}
  .wq-body a{
    color:var(--wq-link);
    font-weight:600;
    text-decoration:none;
  }

  .wq-note{
    margin-top:12px;
    padding:12px;
    border-radius:14px;
    border:1px solid var(--wq-card-border);
    background:rgba(255,255,255,.45);
  }
  html.dark .wq-note{background:rgba(255,255,255,.06)}

  .wq-agree-row{
    display:flex;
    gap:10px;
    cursor:pointer;
    user-select:none;
  }
  .wq-agree-row input{
    margin-top:3px;
    width:16px;height:16px;
    accent-color:var(--wq-link);
  }
  .wq-agree-row span{
    color:var(--wq-subtext);
    line-height:1.6;
  }

  .wq-actions{
    padding:14px 18px 18px;
    display:flex;
    gap:10px;
    justify-content:flex-end;
    border-top:1px solid var(--wq-card-border);
    background:rgba(255,255,255,.25);
  }
  html.dark .wq-actions{background:rgba(255,255,255,.03)}

  .wq-btn{
    border:1px solid var(--wq-card-border);
    border-radius:14px;
    padding:10px 14px;
    font-size:14px;
    cursor:pointer;
  }
  .wq-btn-ghost{
    background:var(--wq-btn-ghost-bg);
    color:var(--wq-btn-ghost-text);
  }
  .wq-btn-primary{
    background:var(--wq-btn-bg);
    color:var(--wq-btn-text);
    border-color:transparent;
  }
  .wq-btn[disabled]{
    opacity:.55;
    cursor:not-allowed;
  }
</style>

<div class="wq-modal" id="wqModal" aria-hidden="true">
  <div class="wq-card" id="wqCard">
    <div class="wq-header">
      <div class="wq-title">
        <div class="wq-badge">ğŸ“Œ</div>
        è®¿é—®æç¤º
      </div>
    </div>

    <div class="wq-body">
      <p>
        ä½¿ç”¨æœ¬ç«™å‰ï¼Œè¯·å…ˆé˜…è¯»
        <a href="/about/">ã€Šå…³äºã€‹</a>
        é¡µé¢ä¸­çš„ç›¸å…³è¯´æ˜ã€‚
      </p>
      <p>ç»§ç»­è®¿é—®å’Œæ“ä½œï¼Œå³è§†ä¸ºæ‚¨åŒæ„ç›¸å…³çº¦å®šã€‚</p>

      <div class="wq-note">
        <label class="wq-agree-row">
          <input id="wqAgree" type="checkbox">
          <span>
            æˆ‘å·²ç†è§£å¹¶åŒæ„ï¼Œç¡®è®¤ç»§ç»­è®¿é—®ã€‚
          </span>
        </label>
      </div>
    </div>

    <div class="wq-actions">
      <a class="wq-btn wq-btn-ghost" href="/about/">æŸ¥çœ‹å…³äº</a>
      <button class="wq-btn wq-btn-primary" id="wqModalOk" disabled>
        è¿›å…¥ç½‘ç«™
      </button>
    </div>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function () {
  var path = location.pathname || "/";
  if (path !== "/" && path !== "/index.html") return;

  var KEY = "wq_first_visit_modal_v1";
  if (localStorage.getItem(KEY) === "1") return;

  var modal = document.getElementById("wqModal");
  var card = document.getElementById("wqCard");
  var ok = document.getElementById("wqModalOk");
  var agree = document.getElementById("wqAgree");

  if (!modal || !card || !ok || !agree) return;

  ok.disabled = true;

  function show(){
    modal.style.display = "flex";
    requestAnimationFrame(function(){
      modal.classList.add("show");
    });
    document.documentElement.style.overflow = "hidden";
  }

  function shake(){
    card.classList.remove("wq-shake");
    card.offsetWidth;
    card.classList.add("wq-shake");
  }

  function hide(){
    if (!agree.checked){
      shake();
      return;
    }
    modal.classList.remove("show");
    document.documentElement.style.overflow = "";
    setTimeout(function(){
      modal.style.display = "none";
    },200);
    localStorage.setItem(KEY,"1");
  }

  agree.addEventListener("change",function(){
    ok.disabled = !agree.checked;
  });

  ok.addEventListener("click", hide);

  modal.addEventListener("click",function(e){
    if (e.target === modal) hide();
  });

  document.addEventListener("keydown",function(e){
    if (e.key === "Escape") hide();
  });

  show();
});
</script>
<!-- ===== å¼¹çª—ç»“æŸ ===== -->





{{- if .IsPage -}}
<!-- ===== WQ: inject article meta under H1 (Lastmod + ReadingTime) [PILL STYLE] ===== -->
<style>
  .hx-article-meta{
    margin-top: 1.35rem;          /* âœ… ä¸æ ‡é¢˜æ‹‰å¼€ä¸€ç‚¹ */
    margin-bottom: 2.0rem;
    padding-bottom: 1.1rem;
    border-bottom: 1px solid rgba(0,0,0,.06);
    display: flex;
    align-items: center;
    gap: .6rem;
    flex-wrap: wrap;
    color: rgba(100,116,139,1);
    font-size: .92rem;
    line-height: 1.6;
  }
  html.dark .hx-article-meta{
    border-bottom-color: rgba(255,255,255,.10);
    color: rgba(209,213,219,.80);
  }

  /* âœ… pill ç»Ÿä¸€æ ·å¼ï¼ˆApple-ishï¼šè½»ã€åœ†ã€å…‹åˆ¶ï¼‰ */
  .hx-article-meta .wq-pill{
    display: inline-flex;
    align-items: center;
    gap: .45rem;
    padding: .32rem .58rem;
    border-radius: 999px;
    border: 1px solid rgba(0,0,0,.06);
    background: rgba(148,163,184,.10);
    white-space: nowrap;
  }
  html.dark .hx-article-meta .wq-pill{
    border-color: rgba(255,255,255,.10);
    background: rgba(255,255,255,.06);
  }

  /* âœ… æ ‡ç­¾æ–‡å­—ï¼šåˆ«å¤ªé»‘ï¼Œç•¥åŠ ç²—ä½†â€œç°â€ */
  .hx-article-meta .wq-key{
    font-weight: 700;
    color: rgba(100,116,139,.95); /* ç° */
  }
  html.dark .hx-article-meta .wq-key{
    color: rgba(209,213,219,.88);
  }

  /* âœ… å€¼ï¼šæ›´æ·¡ä¸€ç‚¹ï¼Œé¿å…æŠ¢æ ‡é¢˜ */
  .hx-article-meta .wq-val{
    color: rgba(100,116,139,.90);
    font-variant-numeric: tabular-nums;
  }
  html.dark .hx-article-meta .wq-val{
    color: rgba(209,213,219,.80);
  }

  /* âœ… å·¦ä¾§å°åœ†ç‚¹ï¼šæ›´å…‹åˆ¶ */
  .hx-article-meta .wq-dot{
    width: 7px;
    height: 7px;
    border-radius: 999px;
    background: rgba(37,99,235,.55);
    box-shadow: 0 0 0 3px rgba(37,99,235,.10);
    display: inline-block;
    flex: 0 0 auto;
  }
  html.dark .hx-article-meta .wq-dot{
    background: rgba(96,165,250,.65);
    box-shadow: 0 0 0 3px rgba(96,165,250,.14);
  }

  /* æ‰‹æœºç«¯ï¼špill è‡ªåŠ¨æ¢è¡Œå°±å¥½ï¼Œä¸æŒ¤ */
  @media (max-width: 520px){
    .hx-article-meta{ gap: .5rem; }
    .hx-article-meta .wq-pill{ padding: .30rem .55rem; }
  }
</style>

{{/* ===== 1) æœ€åæ›´æ–°ï¼šä¼˜å…ˆ Lastmodï¼Œå…¶æ¬¡ Date ===== */}}
{{- $wqLast := (cond (gt (.Lastmod.Unix) 0) (.Lastmod.Format "2006-01-02") (.Date.Format "2006-01-02")) -}}

{{/* ===== 2) é˜…è¯»æ—¶é—´ï¼šä¸­æ–‡æŒ‰â€œå­—æ•°â€ä¼°ç®—ï¼ˆæ›´é€‚åˆä¸­æ–‡ï¼‰ =====
     æ¯åˆ†é’Ÿå­—æ•°ï¼ˆç†è§£å‹é˜…è¯»ï¼‰ï¼šå»ºè®® 380~450
*/}}
{{- $wqMins := .ReadingTime -}}
{{- $lang := lower .Lang -}}
{{- if or (eq $lang "zh-cn") (eq $lang "zh") -}}
  {{- $plain := .Plain -}}
  {{- $noSpace := replaceRE "\\s+" "" $plain -}}
  {{- $chars := len $noSpace -}}
  {{- $wqCPM := 450 -}}  {{/* âœ… è¿™é‡Œæ”¹é€Ÿåº¦ï¼š380(æ›´æ…¢) / 450(é»˜è®¤) / 500(æ›´å¿«) */}}
  {{- $wqMins = div (add $chars (sub $wqCPM 1)) $wqCPM -}} {{/* å‘ä¸Šå–æ•´ */}}
  {{- if lt $wqMins 1 -}}{{- $wqMins = 1 -}}{{- end -}}
{{- end -}}

{{/* ===== 3) è¾“å‡ºç»™ JSï¼š "YYYY-MM-DD|mins" ===== */}}
{{- $wqMeta := (printf "%s|%d" $wqLast $wqMins) | jsonify -}}

<script>
(function(){
  document.addEventListener("DOMContentLoaded", function(){
    var h1 = document.querySelector("article h1");
    if(!h1) return;

    // é˜²é‡å¤æ’å…¥
    if(document.querySelector(".hx-article-meta")) return;

    // Hugo è¾“å‡º JSON å­—ç¬¦ä¸²ï¼š "2026-01-07|5"
    var raw = JSON.parse({{ $wqMeta }});
    var parts = String(raw).split("|");
    var last = parts[0] || "";
    var mins = parts[1] || "";

    var meta = document.createElement("div");
    meta.className = "hx-article-meta";
    meta.innerHTML =
      '<span class="wq-pill" role="note">' +
        '<span class="wq-dot" aria-hidden="true"></span>' +
        '<span class="wq-key">æœ€åæ›´æ–°</span>' +
        '<span class="wq-val">' + last + '</span>' +
      '</span>' +
      '<span class="wq-pill" role="note">' +
        '<span class="wq-key">é˜…è¯»</span>' +
        '<span class="wq-val">çº¦ ' + mins + ' åˆ†é’Ÿ</span>' +
      '</span>';

    h1.insertAdjacentElement("afterend", meta);
  });
})();
</script>
<!-- ===== WQ: inject article meta end ===== -->
{{- end -}}




<!-- =========================================================
 WQ Mobile MainNav Drawer (æ–¹æ¡ˆ2ï¼šæ›¿æ¢åŸç”Ÿä¸‰æ¨ªçº¿æŠ½å±‰)
 æ”¾ç½®ä½ç½®ï¼šlayouts/partials/custom/head-end.html
 ä½œç”¨ï¼šä»…æ‰‹æœºç«¯éšè—ä¸»é¢˜ä¸‰æ¨ªçº¿ï¼Œå¹¶æ³¨å…¥è‡ªå·±çš„â€œä¸»å¯¼èˆªæŠ½å±‰â€
========================================================= -->

<style>
  /* ä»…æ‰‹æœºç«¯ï¼šéšè—ä¸»é¢˜è‡ªå¸¦ä¸‰æ¨ªçº¿æŒ‰é’® */
  @media (max-width: 768px){
    button.hextra-hamburger-menu{ display:none !important; }
  }

  /* æˆ‘ä»¬è‡ªå·±çš„æŒ‰é’®ï¼ˆæ”¾åœ¨å¯¼èˆªæ æœ€å³ä¾§ï¼‰ */
  .wq-mnav-btn{
    display: none;
    align-items: center;
    justify-content: center;
    width: 40px; height: 40px;
    border-radius: 12px;
    border: 1px solid rgba(0,0,0,.10);
    background: rgba(255,255,255,.75);
    color: rgba(17,24,39,.92);
    cursor: pointer;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
  }
  html.dark .wq-mnav-btn{
    border-color: rgba(255,255,255,.12);
    background: rgba(24,24,27,.60);
    color: rgba(255,255,255,.92);
  }
  @media (max-width: 768px){
    .wq-mnav-btn{ display: inline-flex; }
  }

  /* é®ç½© + æŠ½å±‰ */
  .wq-mnav-mask{
    position: fixed;
    inset: 0;
    z-index: 99999;
    display: none;
    background: rgba(0,0,0,.42);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }
  .wq-mnav-mask.show{ display:block; }

  .wq-mnav-sheet{
    position: absolute;
    top: 0; right: 0;
    height: 100%;
    width: min(86vw, 360px);
    background: rgba(255,255,255,.92);
    border-left: 1px solid rgba(0,0,0,.10);
    box-shadow: -18px 0 50px rgba(0,0,0,.18);
    transform: translateX(14px);
    opacity: 0;
    transition: transform .18s ease, opacity .18s ease;
    display: flex;
    flex-direction: column;
    padding: 14px;
  }
  .wq-mnav-mask.show .wq-mnav-sheet{
    transform: translateX(0);
    opacity: 1;
  }

  html.dark .wq-mnav-mask{ background: rgba(0,0,0,.55); }
  html.dark .wq-mnav-sheet{
    background: rgba(24,24,27,.92);
    border-left-color: rgba(255,255,255,.12);
    box-shadow: -18px 0 60px rgba(0,0,0,.45);
  }

  .wq-mnav-head{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap: 10px;
    padding: 6px 2px 12px;
    border-bottom: 1px solid rgba(0,0,0,.08);
  }
  html.dark .wq-mnav-head{ border-bottom-color: rgba(255,255,255,.10); }

  .wq-mnav-title{
    font-size: 15px;
    font-weight: 850;
    color: rgba(17,24,39,.92);
    letter-spacing: .2px;
  }
  html.dark .wq-mnav-title{ color: rgba(255,255,255,.92); }

  .wq-mnav-close{
    width: 34px; height: 34px;
    border-radius: 12px;
    border: 1px solid rgba(0,0,0,.10);
    background: rgba(255,255,255,.65);
    color: rgba(17,24,39,.92);
    cursor: pointer;
  }
  html.dark .wq-mnav-close{
    border-color: rgba(255,255,255,.12);
    background: rgba(255,255,255,.08);
    color: rgba(255,255,255,.92);
  }

  .wq-mnav-list{
    padding: 12px 0 6px;
    display:flex;
    flex-direction: column;
    gap: 8px;
  }

  .wq-mnav-item{
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding: 12px 12px;
    border-radius: 14px;
    border: 1px solid rgba(0,0,0,.08);
    background: rgba(255,255,255,.70);
    color: rgba(17,24,39,.92);
    text-decoration: none;
    font-size: 14px;
    font-weight: 650;
  }
  .wq-mnav-item:hover{
    border-color: rgba(37,99,235,.18);
    background: rgba(37,99,235,.06);
  }
  html.dark .wq-mnav-item{
    border-color: rgba(255,255,255,.10);
    background: rgba(255,255,255,.06);
    color: rgba(255,255,255,.92);
  }
  html.dark .wq-mnav-item:hover{
    border-color: rgba(96,165,250,.20);
    background: rgba(96,165,250,.10);
  }

  .wq-mnav-item .arrow{ opacity:.55; }

  .wq-mnav-foot{
    margin-top: auto;
    padding-top: 10px;
    border-top: 1px solid rgba(0,0,0,.08);
    font-size: 12px;
    opacity: .6;
    color: rgba(17,24,39,.70);
  }
  html.dark .wq-mnav-foot{
    border-top-color: rgba(255,255,255,.10);
    color: rgba(255,255,255,.72);
  }
</style>

<script>
(function(){
  // ===== ä½ å¯ä»¥æ”¹çš„é“¾æ¥ï¼ˆåªæ”¹è¿™é‡Œï¼‰=====
  var LINKS = [
    { text: "é¦–é¡µ", href: "/" },
    { text: "æ–‡æ¡£", href: "/docs/" },
    { text: "ç½‘ç›˜", href: "https://pan.qinghub.top", external: true },
    { text: "å…³äº", href: "/about/" },
    // âœ… ä½ è¦â€œè·³åˆ° Gmailâ€ï¼šç½‘é¡µç«¯æœ€ç¨³æ˜¯ mailtoï¼ˆä¼šè°ƒèµ·é»˜è®¤é‚®ç®±/æˆ–Gmail Appï¼‰
    // å¦‚æœä½ ä¸€å®šè¦â€œæ‰“å¼€ Gmail ç½‘é¡µâ€ï¼ŒæŠŠ href æ”¹æˆï¼šhttps://mail.google.com/
    { text: "è”ç³»", href: "mailto:3276831872@qq.com", external: true },
    { text: "GitHub", href: "https://github.com/wangqing176176-a11y", external: true },
    { text: "Twitter", href: "https://x.com/Whisky_0802", external: true }
  ];

  function isMobile(){
    return window.matchMedia && window.matchMedia("(max-width: 768px)").matches;
  }

  function ensureUI(){
    if (!isMobile()) return;

    // 1) ç»™å¯¼èˆªæ å³ä¾§æ’å…¥æˆ‘ä»¬è‡ªå·±çš„æŒ‰é’®
    var nav = document.querySelector("nav.hextra-max-navbar-width");
    if (nav && !nav.querySelector("#wqMnavBtn")) {
      var btn = document.createElement("button");
      btn.id = "wqMnavBtn";
      btn.className = "wq-mnav-btn";
      btn.type = "button";
      btn.setAttribute("aria-label", "Menu");
      btn.textContent = "â‰¡";
      nav.appendChild(btn);
    }

    // 2) æ³¨å…¥æŠ½å±‰ï¼ˆåªæ³¨ä¸€æ¬¡ï¼‰
    if (!document.getElementById("wqMnavMask")) {
      var mask = document.createElement("div");
      mask.id = "wqMnavMask";
      mask.className = "wq-mnav-mask";
      mask.setAttribute("aria-hidden", "true");

      var sheet = document.createElement("div");
      sheet.className = "wq-mnav-sheet";
      sheet.setAttribute("role", "dialog");
      sheet.setAttribute("aria-modal", "true");
      sheet.setAttribute("aria-label", "ä¸»å¯¼èˆª");

      var head = document.createElement("div");
      head.className = "wq-mnav-head";

      var title = document.createElement("div");
      title.className = "wq-mnav-title";
      title.textContent = "å¯¼èˆª";

      var close = document.createElement("button");
      close.className = "wq-mnav-close";
      close.type = "button";
      close.setAttribute("aria-label", "Close");
      close.textContent = "Ã—";

      head.appendChild(title);
      head.appendChild(close);

      var list = document.createElement("div");
      list.className = "wq-mnav-list";

      LINKS.forEach(function(it){
        var a = document.createElement("a");
        a.className = "wq-mnav-item";
        a.href = it.href;
        if (it.external) {
          a.target = "_blank";
          a.rel = "noopener noreferrer";
        }
        a.innerHTML = '<span>' + it.text + '</span><span class="arrow">â€º</span>';
        list.appendChild(a);
      });

      var foot = document.createElement("div");
      foot.className = "wq-mnav-foot";
      foot.textContent = "WangQing's BLOG Â· ä¸»å¯¼èˆªæŠ½å±‰";

      sheet.appendChild(head);
      sheet.appendChild(list);
      sheet.appendChild(foot);

      mask.appendChild(sheet);
      document.body.appendChild(mask);

      // äº¤äº’
      function open(){
        mask.classList.add("show");
        mask.setAttribute("aria-hidden", "false");
        try{ document.documentElement.style.overflow = "hidden"; }catch(e){}
      }
      function closeMenu(){
        mask.classList.remove("show");
        mask.setAttribute("aria-hidden", "true");
        try{ document.documentElement.style.overflow = ""; }catch(e){}
      }

      document.addEventListener("click", function(e){
        var btn = document.getElementById("wqMnavBtn");
        if (btn && e.target === btn) open();
      });

      close.addEventListener("click", closeMenu);

      mask.addEventListener("click", function(e){
        if (e.target === mask) closeMenu();
      });

      document.addEventListener("keydown", function(e){
        if (e.key === "Escape" && mask.classList.contains("show")) closeMenu();
      });
    }
  }

  // åˆæ¬¡åŠ è½½
  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", ensureUI);
  } else {
    ensureUI();
  }

  // å±å¹•æ—‹è½¬/å°ºå¯¸å˜åŒ–
  window.addEventListener("resize", function(){
    ensureUI();
  });
})();
</script>
<!-- =========================================================
 WQ Mobile MainNav Drawer end
========================================================= -->


<style>
/* ===== WQ: mobile menu animation + icon layout ===== */
.wq-mobile-menu-mask{
  position: fixed;
  inset: 0;
  z-index: 9999;
  display: none;
  background: rgba(0,0,0,.35);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  opacity: 0;
  transition: opacity .18s ease;
}
.wq-mobile-menu-mask.show{
  display: block;
  opacity: 1;
}

.wq-mobile-menu-sheet{
  position: absolute;
  top: 0;
  right: 0;
  height: 100%;
  width: min(86vw, 360px);
  background: rgba(255,255,255,.92);
  border-left: 1px solid rgba(0,0,0,.08);
  transform: translateX(14px);
  opacity: 0;
  transition: transform .18s ease, opacity .18s ease;
  display: flex;
  flex-direction: column;
}

.wq-mobile-menu-mask.show .wq-mobile-menu-sheet{
  transform: translateX(0);
  opacity: 1;
}

html.dark .wq-mobile-menu-sheet{
  background: rgba(24,24,27,.92);
  border-left-color: rgba(255,255,255,.10);
}

.wq-mm-list{
  margin: 10px 12px 14px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.wq-mm-item{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 12px 14px;
  border-radius: 14px;
  border: 1px solid rgba(0,0,0,.08);
  background: rgba(255,255,255,.70);
  text-decoration: none !important;
  color: rgba(17,24,39,.92);
}
.wq-mm-item:hover{
  background: rgba(37,99,235,.05);
  border-color: rgba(37,99,235,.18);
}

html.dark .wq-mm-item{
  border-color: rgba(255,255,255,.10);
  background: rgba(255,255,255,.06);
  color: rgba(255,255,255,.92);
}
html.dark .wq-mm-item:hover{
  background: rgba(96,165,250,.10);
  border-color: rgba(96,165,250,.22);
}

.wq-mm-left{
  display: flex;
  align-items: center;
  gap: 10px;
  min-width: 0;
}
.wq-mm-text{
  font-weight: 750;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.wq-mm-ico{
  width: 18px;
  height: 18px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  opacity: .9;
  flex: 0 0 auto;
}
.wq-mm-ico svg{
  width: 18px;
  height: 18px;
}

.wq-mm-right{
  opacity: .55;
  font-weight: 800;
}

/* é™ä½åŠ¨ç”»å¼ºåº¦ï¼ˆç³»ç»Ÿå‡å°‘åŠ¨æ€ï¼‰ */
@media (prefers-reduced-motion: reduce){
  .wq-mobile-menu-mask,
  .wq-mobile-menu-sheet{
    transition: none !important;
  }
}
</style>

<script>
/**
 * WQ Mobile Menu Enhancement
 * 1) add svg icons
 * 2) ensure items have uniform class + arrow
 * 3) keep animation class (.show) consistent
 */
(function(){
  function iconSvg(type){
    // ç®€æ´çº¿æ€§ SVGï¼ˆæ— éœ€é¢å¤–ä¾èµ–ï¼‰
    var map = {
      home:   '<svg viewBox="0 0 24 24" fill="none"><path d="M4 10.5 12 4l8 6.5V20a1 1 0 0 1-1 1h-5v-6H10v6H5a1 1 0 0 1-1-1v-9.5Z" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round"/></svg>',
      docs:   '<svg viewBox="0 0 24 24" fill="none"><path d="M7 3h7l3 3v15a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1Z" stroke="currentColor" stroke-width="1.8"/><path d="M14 3v4h4" stroke="currentColor" stroke-width="1.8"/></svg>',
      cloud:  '<svg viewBox="0 0 24 24" fill="none"><path d="M7.5 18h9.2a3.3 3.3 0 0 0 .4-6.6A5.3 5.3 0 0 0 6.2 9.7 3.7 3.7 0 0 0 7.5 18Z" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg>',
      about:  '<svg viewBox="0 0 24 24" fill="none"><path d="M12 12v6" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/><path d="M12 8h.01" stroke="currentColor" stroke-width="3" stroke-linecap="round"/><path d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" stroke="currentColor" stroke-width="1.8"/></svg>',
      mail:   '<svg viewBox="0 0 24 24" fill="none"><path d="M4 6h16v12H4V6Z" stroke="currentColor" stroke-width="1.8"/><path d="m4 7 8 6 8-6" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round"/></svg>',
      github: '<svg viewBox="0 0 24 24" fill="none"><path d="M12 2a10 10 0 0 0-3.2 19.5c.5.1.7-.2.7-.5v-1.8c-2.9.6-3.5-1.2-3.5-1.2-.5-1.2-1.2-1.5-1.2-1.5-1-.7.1-.7.1-.7 1.1.1 1.7 1.1 1.7 1.1 1 1.7 2.7 1.2 3.3.9.1-.7.4-1.2.7-1.5-2.3-.3-4.7-1.1-4.7-5a3.9 3.9 0 0 1 1-2.7c-.1-.3-.5-1.4.1-2.8 0 0 .9-.3 2.9 1.1a10 10 0 0 1 5.2 0c2-1.4 2.9-1.1 2.9-1.1.6 1.4.2 2.5.1 2.8a3.9 3.9 0 0 1 1 2.7c0 3.9-2.4 4.7-4.7 5 .4.3.7 1 .7 2.1V21c0 .3.2.6.7.5A10 10 0 0 0 12 2Z" fill="currentColor"/></svg>',
      link:   '<svg viewBox="0 0 24 24" fill="none"><path d="M10 13a5 5 0 0 1 0-7l1-1a5 5 0 0 1 7 7l-1 1" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/><path d="M14 11a5 5 0 0 1 0 7l-1 1a5 5 0 0 1-7-7l1-1" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/></svg>'
    };
    return map[type] || map.link;
  }

  function pickIcon(href, text){
    href = (href || "").toLowerCase();
    text = (text || "").toLowerCase();
    if (href === "/" || text.includes("é¦–é¡µ")) return "home";
    if (href.includes("/docs") || text.includes("æ–‡æ¡£") || text.includes("æ–‡ç« ")) return "docs";
    if (href.includes("pan.") || text.includes("ç½‘ç›˜")) return "cloud";
    if (href.includes("/about") || text.includes("å…³äº")) return "about";
    if (href.startsWith("mailto:") || text.includes("è”ç³»") || text.includes("email")) return "mail";
    if (href.includes("github.com") || text.includes("github")) return "github";
    return "link";
  }

  function enhance(){
    var list = document.getElementById("wqMmList");
    if(!list) return;

    // ä½ ç°åœ¨ wqMmList å¯èƒ½æ˜¯ nav æˆ– ul æˆ– divï¼šç»Ÿä¸€å¤„ç†å…¶å­ a
    var links = list.querySelectorAll("a");
    links.forEach(function(a){
      // ç»Ÿä¸€ classï¼ˆé¿å…ä½ ç°åœ¨çš„æ ·å¼è¢«ä¸»é¢˜ä¹±è¦†ç›–ï¼‰
      a.classList.add("wq-mm-item");

      // æ„é€ å·¦ä¾§ï¼ˆicon + textï¼‰
      var text = (a.textContent || "").trim();
      var href = a.getAttribute("href") || "";

      // å¦‚æœå·²ç»å¤„ç†è¿‡å°±è·³è¿‡
      if (a.querySelector(".wq-mm-left")) return;

      a.textContent = ""; // æ¸…ç©ºåé‡å»ºç»“æ„

      var left = document.createElement("span");
      left.className = "wq-mm-left";

      var ico = document.createElement("span");
      ico.className = "wq-mm-ico";
      ico.innerHTML = iconSvg(pickIcon(href, text));

      var t = document.createElement("span");
      t.className = "wq-mm-text";
      t.textContent = text || href;

      var right = document.createElement("span");
      right.className = "wq-mm-right";
      right.textContent = "â€º";

      left.appendChild(ico);
      left.appendChild(t);

      a.appendChild(left);
      a.appendChild(right);
    });
  }

  // é¦–æ¬¡æ‰§è¡Œ + ä»¥åæ¯æ¬¡æ‰“å¼€éƒ½å…œåº•æ‰§è¡Œ
  document.addEventListener("DOMContentLoaded", enhance);

  // å¦‚æœä½ çš„æ‰“å¼€é€»è¾‘æ˜¯ç»™ #wqMobileMenu åŠ  show classï¼Œè¿™é‡Œç›‘å¬ class å˜åŒ–
  var menu = document.getElementById("wqMobileMenu");
  if(menu && window.MutationObserver){
    var obs = new MutationObserver(function(){
      if(menu.classList.contains("show")) enhance();
    });
    obs.observe(menu, { attributes: true, attributeFilter: ["class"] });
  }
})();
</script>