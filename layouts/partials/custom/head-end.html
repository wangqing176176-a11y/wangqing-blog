<!-- ===== Apple é£ï¼šé¦–é¡µè®¿é—®æç¤ºå¼¹çª—ï¼ˆä»…é¦–é¡µ + é¦–æ¬¡è®¿é—®ï¼‰ ===== -->
<style>
  :root{
    --wq-mask: rgba(0,0,0,.38);
    --wq-card-bg: rgba(255,255,255,.78);
    --wq-card-border: rgba(0,0,0,.08);
    --wq-text: rgba(17,24,39,.95);
    --wq-subtext: rgba(17,24,39,.68);
    --wq-link: #2563eb;
    --wq-shadow: 0 24px 60px rgba(0,0,0,.18);
    --wq-radius: 20px;
    --wq-btn-bg: #111827;
    --wq-btn-text: #fff;
    --wq-btn-ghost-bg: rgba(17,24,39,.06);
    --wq-btn-ghost-text: rgba(17,24,39,.88);
  }

  html.dark{
    --wq-mask: rgba(0,0,0,.55);
    --wq-card-bg: rgba(24,24,27,.72);
    --wq-card-border: rgba(255,255,255,.10);
    --wq-text: rgba(255,255,255,.92);
    --wq-subtext: rgba(255,255,255,.68);
    --wq-link: #7aa2ff;
    --wq-shadow: 0 24px 70px rgba(0,0,0,.45);
    --wq-btn-bg: rgba(255,255,255,.92);
    --wq-btn-text: rgba(0,0,0,.88);
    --wq-btn-ghost-bg: rgba(255,255,255,.10);
    --wq-btn-ghost-text: rgba(255,255,255,.88);
  }

  .wq-modal{
    position: fixed;
    inset: 0;
    z-index: 9999;
    display: none;
    align-items: center;
    justify-content: center;
    padding: 18px;
    background: var(--wq-mask);
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
  }

  .wq-card{
    width: min(560px,100%);
    background: var(--wq-card-bg);
    border: 1px solid var(--wq-card-border);
    border-radius: var(--wq-radius);
    box-shadow: var(--wq-shadow);
    overflow: hidden;
    transform: translateY(10px) scale(.98);
    opacity: 0;
    transition: transform .25s ease, opacity .25s ease;
  }

  .wq-modal.show .wq-card{
    transform: translateY(0) scale(1);
    opacity: 1;
  }

  /* è½»å¾®éœ‡åŠ¨åé¦ˆ */
  .wq-shake{
    animation: wq-shake .28s ease;
  }
  @keyframes wq-shake{
    0%{transform:translateX(0)}
    25%{transform:translateX(-4px)}
    50%{transform:translateX(4px)}
    75%{transform:translateX(-3px)}
    100%{transform:translateX(0)}
  }

  .wq-header{
    padding: 18px 18px 10px;
  }
  .wq-title{
    display:flex;
    align-items:center;
    gap:10px;
    font-size:16px;
    font-weight:700;
    color:var(--wq-text);
  }
  .wq-badge{
    width:34px;height:34px;
    border-radius:12px;
    display:grid;
    place-items:center;
    background:rgba(255,255,255,.55);
    border:1px solid var(--wq-card-border);
  }
  html.dark .wq-badge{background:rgba(255,255,255,.10)}

  .wq-body{
    padding:0 18px 16px;
    font-size:14.5px;
    line-height:1.75;
    color:var(--wq-text);
  }
  .wq-body p{margin:10px 0}
  .wq-body a{
    color:var(--wq-link);
    font-weight:600;
    text-decoration:none;
  }

  .wq-note{
    margin-top:12px;
    padding:12px;
    border-radius:14px;
    border:1px solid var(--wq-card-border);
    background:rgba(255,255,255,.45);
  }
  html.dark .wq-note{background:rgba(255,255,255,.06)}

  .wq-agree-row{
    display:flex;
    gap:10px;
    cursor:pointer;
    user-select:none;
  }
  .wq-agree-row input{
    margin-top:3px;
    width:16px;height:16px;
    accent-color:var(--wq-link);
  }
  .wq-agree-row span{
    color:var(--wq-subtext);
    line-height:1.6;
  }

  .wq-actions{
    padding:14px 18px 18px;
    display:flex;
    gap:10px;
    justify-content:flex-end;
    border-top:1px solid var(--wq-card-border);
    background:rgba(255,255,255,.25);
  }
  html.dark .wq-actions{background:rgba(255,255,255,.03)}

  .wq-btn{
    border:1px solid var(--wq-card-border);
    border-radius:14px;
    padding:10px 14px;
    font-size:14px;
    cursor:pointer;
  }
  .wq-btn-ghost{
    background:var(--wq-btn-ghost-bg);
    color:var(--wq-btn-ghost-text);
  }
  .wq-btn-primary{
    background:var(--wq-btn-bg);
    color:var(--wq-btn-text);
    border-color:transparent;
  }
  .wq-btn[disabled]{
    opacity:.55;
    cursor:not-allowed;
  }
</style>

<div class="wq-modal" id="wqModal" aria-hidden="true">
  <div class="wq-card" id="wqCard">
    <div class="wq-header">
      <div class="wq-title">
        <div class="wq-badge">ğŸ“Œ</div>
        è®¿é—®æç¤º
      </div>
    </div>

    <div class="wq-body">
      <p>
        ä½¿ç”¨æœ¬ç«™å‰ï¼Œè¯·å…ˆé˜…è¯»
        <a href="/about/">ã€Šå…³äºã€‹</a>
        é¡µé¢ä¸­çš„ç›¸å…³è¯´æ˜ã€‚
      </p>
      <p>ç»§ç»­è®¿é—®å’Œæ“ä½œï¼Œå³è§†ä¸ºæ‚¨åŒæ„ç›¸å…³çº¦å®šã€‚</p>

      <div class="wq-note">
        <label class="wq-agree-row">
          <input id="wqAgree" type="checkbox">
          <span>
            æˆ‘å·²ç†è§£å¹¶åŒæ„ï¼Œç¡®è®¤ç»§ç»­è®¿é—®ã€‚
          </span>
        </label>
      </div>
    </div>

    <div class="wq-actions">
      <a class="wq-btn wq-btn-ghost" href="/about/">æŸ¥çœ‹å…³äº</a>
      <button class="wq-btn wq-btn-primary" id="wqModalOk" disabled>
        è¿›å…¥ç½‘ç«™
      </button>
    </div>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function () {
  var path = location.pathname || "/";
  if (path !== "/" && path !== "/index.html") return;

  var KEY = "wq_first_visit_modal_v1";
  if (localStorage.getItem(KEY) === "1") return;

  var modal = document.getElementById("wqModal");
  var card = document.getElementById("wqCard");
  var ok = document.getElementById("wqModalOk");
  var agree = document.getElementById("wqAgree");

  if (!modal || !card || !ok || !agree) return;

  ok.disabled = true;

  function show(){
    modal.style.display = "flex";
    requestAnimationFrame(function(){
      modal.classList.add("show");
    });
    document.documentElement.style.overflow = "hidden";
  }

  function shake(){
    card.classList.remove("wq-shake");
    card.offsetWidth;
    card.classList.add("wq-shake");
  }

  function hide(){
    if (!agree.checked){
      shake();
      return;
    }
    modal.classList.remove("show");
    document.documentElement.style.overflow = "";
    setTimeout(function(){
      modal.style.display = "none";
    },200);
    localStorage.setItem(KEY,"1");
  }

  agree.addEventListener("change",function(){
    ok.disabled = !agree.checked;
  });

  ok.addEventListener("click", hide);

  modal.addEventListener("click",function(e){
    if (e.target === modal) hide();
  });

  document.addEventListener("keydown",function(e){
    if (e.key === "Escape") hide();
  });

  show();
});
</script>
<!-- ===== å¼¹çª—ç»“æŸ ===== -->




{{- if .IsPage -}}
<!-- ===== WQ: inject article meta under H1 (Lastmod + ReadingTime) [PILL STYLE - COMPACT] ===== -->
<style>
  /* æ ¸å¿ƒç›®æ ‡ï¼š
     1) å­—ä½“æ¯”æ­£æ–‡å°ä¸€æ¡£
     2) pill é«˜åº¦æ›´çŸ®ï¼ˆpadding æ›´å°ã€line-height æ›´ç´§ï¼‰
     3) å°å±æ›´ç´§å‡‘ï¼ˆä¸æŒ¤ã€ä¸éš¾çœ‹ï¼‰
  */

  .hx-article-meta{
    margin-top: 1.05rem;          /* æ¯”åŸæ¥æ›´è´´è¿‘æ ‡é¢˜ä¸€ç‚¹ */
    margin-bottom: 1.55rem;
    padding-bottom: .85rem;
    border-bottom: 1px solid rgba(0,0,0,.06);

    display: flex;
    align-items: center;
    gap: .5rem;
    flex-wrap: wrap;

    color: rgba(100,116,139,1);

    /* âœ… å­—ä½“æ•´ä½“ç¼©å°ï¼šæ¡Œé¢/ç§»åŠ¨éƒ½æ›´èˆ’æœ */
    font-size: clamp(.78rem, 1.6vw, .86rem);
    line-height: 1.35;
  }

  html.dark .hx-article-meta{
    border-bottom-color: rgba(255,255,255,.10);
    color: rgba(209,213,219,.80);
  }

  /* âœ… pill æ›´çŸ®æ›´ç²¾è‡´ */
  .hx-article-meta .wq-pill{
    display: inline-flex;
    align-items: center;
    gap: .38rem;

    /* âœ… å…³é”®ï¼šç¼©å° padding è®©æ°”æ³¡å˜çŸ® */
    padding: .26rem .54rem;

    border-radius: 999px;
    border: 1px solid rgba(0,0,0,.06);
    background: rgba(148,163,184,.10);

    white-space: nowrap;

    /* âœ… é¿å… pill è‡ªå·±åˆæŠŠè¡Œé«˜æ’‘å¤§ */
    line-height: 1.2;
  }

  html.dark .hx-article-meta .wq-pill{
    border-color: rgba(255,255,255,.10);
    background: rgba(255,255,255,.06);
  }

  /* âœ… æ ‡ç­¾æ–‡å­—ï¼šç•¥åŠ ç²—ï¼Œä½†ä¸æŠ¢æ­£æ–‡ */
  .hx-article-meta .wq-key{
    font-weight: 650;               /* æ¯” 700 æ›´â€œæ”¶â€ */
    color: rgba(100,116,139,.95);
    letter-spacing: .01em;
  }
  html.dark .hx-article-meta .wq-key{
    color: rgba(209,213,219,.88);
  }

  /* âœ… å€¼ï¼šæ›´æ·¡ä¸€ç‚¹ */
  .hx-article-meta .wq-val{
    color: rgba(100,116,139,.88);
    font-variant-numeric: tabular-nums;
  }
  html.dark .hx-article-meta .wq-val{
    color: rgba(209,213,219,.78);
  }

  /* âœ… å·¦ä¾§å°åœ†ç‚¹ï¼šç¼©å° + å…‰æ™•æ›´è½» */
  .hx-article-meta .wq-dot{
    width: 6px;
    height: 6px;
    border-radius: 999px;
    background: rgba(37,99,235,.55);
    box-shadow: 0 0 0 2px rgba(37,99,235,.10);
    display: inline-block;
    flex: 0 0 auto;
  }
  html.dark .hx-article-meta .wq-dot{
    background: rgba(96,165,250,.65);
    box-shadow: 0 0 0 2px rgba(96,165,250,.14);
  }

  /* âœ… æ‰‹æœºç«¯ï¼šæ›´ç´§å‡‘ï¼ˆä½ æœ€å…³å¿ƒçš„ï¼‰ */
  @media (max-width: 520px){
    .hx-article-meta{
      margin-top: .9rem;
      margin-bottom: 1.25rem;
      padding-bottom: .7rem;
      gap: .42rem;
      font-size: .78rem;          /* æ‰‹æœºç›´æ¥é”å®šæ›´å° */
      line-height: 1.28;
    }
    .hx-article-meta .wq-pill{
      padding: .21rem .49rem;     /* å†çŸ®ä¸€ç‚¹ */
      gap: .34rem;
    }
    .hx-article-meta .wq-dot{
      width: 5px;
      height: 5px;
      box-shadow: 0 0 0 2px rgba(37,99,235,.10);
    }
  }
</style>

{{/* ===== 1) æœ€åæ›´æ–°ï¼šä¼˜å…ˆ Lastmodï¼Œå…¶æ¬¡ Date ===== */}}
{{- $wqLast := (cond (gt (.Lastmod.Unix) 0) (.Lastmod.Format "2006-01-02") (.Date.Format "2006-01-02")) -}}

{{/* ===== 2) é˜…è¯»æ—¶é—´ï¼šä¸­æ–‡æŒ‰â€œå­—æ•°â€ä¼°ç®—ï¼ˆæ›´é€‚åˆä¸­æ–‡ï¼‰ =====
     æ¯åˆ†é’Ÿå­—æ•°ï¼ˆç†è§£å‹é˜…è¯»ï¼‰ï¼šå»ºè®® 380~450
*/}}
{{- $wqMins := .ReadingTime -}}
{{- $lang := lower .Lang -}}
{{- if or (eq $lang "zh-cn") (eq $lang "zh") -}}
  {{- $plain := .Plain -}}
  {{- $noSpace := replaceRE "\\s+" "" $plain -}}
  {{- $chars := len $noSpace -}}
  {{- $wqCPM := 450 -}}  {{/* âœ… è¿™é‡Œæ”¹é€Ÿåº¦ï¼š380(æ›´æ…¢) / 450(é»˜è®¤) / 500(æ›´å¿«) */}}
  {{- $wqMins = div (add $chars (sub $wqCPM 1)) $wqCPM -}} {{/* å‘ä¸Šå–æ•´ */}}
  {{- if lt $wqMins 1 -}}{{- $wqMins = 1 -}}{{- end -}}
{{- end -}}

{{/* ===== 3) è¾“å‡ºç»™ JSï¼š "YYYY-MM-DD|mins" ===== */}}
{{- $wqMeta := (printf "%s|%d" $wqLast $wqMins) | jsonify -}}

<script>
(function(){
  document.addEventListener("DOMContentLoaded", function(){
    var h1 = document.querySelector("article h1");
    if(!h1) return;

    // é˜²é‡å¤æ’å…¥
    if(document.querySelector(".hx-article-meta")) return;

    // Hugo è¾“å‡º JSON å­—ç¬¦ä¸²ï¼š "2026-01-07|5"
    var raw = JSON.parse({{ $wqMeta }});
    var parts = String(raw).split("|");
    var last = parts[0] || "";
    var mins = parts[1] || "";

    var meta = document.createElement("div");
    meta.className = "hx-article-meta";
    meta.innerHTML =
      '<span class="wq-pill" role="note">' +
        '<span class="wq-dot" aria-hidden="true"></span>' +
        '<span class="wq-key">æœ€åæ›´æ–°</span>' +
        '<span class="wq-val">' + last + '</span>' +
      '</span>' +
      '<span class="wq-pill" role="note">' +
        '<span class="wq-key">é˜…è¯»</span>' +
        '<span class="wq-val">çº¦ ' + mins + ' åˆ†é’Ÿ</span>' +
      '</span>';

    h1.insertAdjacentElement("afterend", meta);
  });
})();
</script>
<!-- ===== WQ: inject article meta end ===== -->
{{- end -}}



<!-- =========================
WQ Mobile Drawer Nav (Hextra) - FINAL STABLE
- æ”¾å…¥ layouts/partials/custom/head-end.html
- åªæ³¨å…¥ style + scriptï¼ˆé¿å…æŠŠ HTML å½“æ­£æ–‡æ˜¾ç¤ºï¼‰
- æœç´¢ï¼šä»…åšâ€œå…¥å£â€ï¼Œè§¦å‘åŸç”Ÿ âŒ˜K/Ctrl+Kï¼ˆæœ€ç¨³ï¼‰
========================= -->
<style>
  /* ===== 1) æ‰‹æœºç«¯ï¼šæŠŠæ±‰å ¡æŒ‰é’®çš„â€œæ¡†æ¡†/åº•è‰²â€å»æ‰ï¼Œå’Œ GitHub/X å¯¹é½ ===== */
  @media (max-width: 768px) {
    button.hextra-hamburger-menu {
      background: transparent !important;
      border: none !important;
      box-shadow: none !important;
      border-radius: 0 !important;
      padding: 6px !important;
    }
    button.hextra-hamburger-menu:hover,
    button.hextra-hamburger-menu:active {
      background: transparent !important;
    }

    /* å›¾æ ‡å°ºå¯¸/è§‚æ„Ÿ */
    button.hextra-hamburger-menu svg {
      width: 24px !important;
      height: 24px !important;
      opacity: 0.92;
    }

    /* X / ä¸‰æ¨ªçº¿åˆ‡æ¢ */
    button.hextra-hamburger-menu svg.open { display: none; }
    button.hextra-hamburger-menu.wq-open svg.open { display: inline; }
    button.hextra-hamburger-menu.wq-open svg:not(.open) { display: none; }
  }

  /* ===== 2) æŠ½å±‰æ ·å¼ï¼ˆä»…æˆ‘ä»¬åˆ›å»ºçš„ DOMï¼Œä½œç”¨åŸŸ wq-mm-*) ===== */
  .wq-mm-mask {
    position: fixed;
    inset: 0;
    z-index: 99999;
    display: none;

    background: rgba(0,0,0,.40);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);

    opacity: 0;
    transition: opacity .26s cubic-bezier(.2,.9,.2,1);
    will-change: opacity;
  }
  .wq-mm-mask.show { display: block; }
  .wq-mm-mask.on { opacity: 1; }

  /* Apple easing + iOS æ›´é¡ºæ»‘ */
  .wq-mm-sheet {
    position: absolute;
    top: 10px;
    right: 10px;
    bottom: 10px;

    width: min(84vw, 320px); /* âœ… å°å±å‹å¥½ */
    background: rgba(255,255,255,.90);
    border: 1px solid rgba(0,0,0,.10);
    border-radius: 18px;
    box-shadow: -18px 0 50px rgba(0,0,0,.18);

    transform: translate3d(18px, 0, 0) scale(.985);
    opacity: 0;

    transition:
      transform .34s cubic-bezier(.16,1,.2,1),
      opacity .22s cubic-bezier(.2,.9,.2,1);

    will-change: transform, opacity;

    display: flex;
    flex-direction: column;
    gap: 10px;
    padding: 12px 12px 14px;
    -webkit-overflow-scrolling: touch;
  }
  .wq-mm-mask.on .wq-mm-sheet {
    transform: translate3d(0,0,0) scale(1);
    opacity: 1;
  }

  html.dark .wq-mm-mask { background: rgba(0,0,0,.60); }

  /* âœ… æ·±è‰²ï¼šæ›´é»‘ã€æ›´â€œé€ä¸€ç‚¹è“â€ */
  html.dark .wq-mm-sheet {
    background: rgba(10,14,20,.94);             /* â† æ¯” 17,24,39 æ›´æ·± */
    border-color: rgba(255,255,255,.12);
    box-shadow: -18px 0 60px rgba(0,0,0,.55);
  }

  .wq-mm-head {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 10px;
    padding-bottom: 8px;
    border-bottom: 1px solid rgba(0,0,0,.08);
  }
  html.dark .wq-mm-head { border-bottom-color: rgba(255,255,255,.10); }

  .wq-mm-title {
    font-weight: 800;   /* âœ… ä¸è¦å¤ªç²— */
    font-size: 18px;  /* âœ… æ›´å…‹åˆ¶ */
    color: rgba(17,24,39,.92);
    letter-spacing: .2px;
  }
  html.dark .wq-mm-title { color: rgba(255,255,255,.92); }

  /* å…³é—­æŒ‰é’®ï¼šæ›´å° + æ— â€œæ¡†æ¡†æ„Ÿâ€ */
  .wq-mm-close {
    width: 28px;
    height: 28px;
    border-radius: 10px;
    border: none;
    background: transparent;
    display: grid;
    place-items: center;
    cursor: pointer;
    color: rgba(17,24,39,.85);
    transition: background .15s ease, transform .15s ease;
  }
  .wq-mm-close:hover { background: rgba(0,0,0,.05); transform: scale(1.02); }
  html.dark .wq-mm-close { color: rgba(255,255,255,.86); }
  html.dark .wq-mm-close:hover { background: rgba(255,255,255,.08); }
  .wq-mm-close .wq-mm-ico { width: 18px; height: 18px; }

  /* ===== æœç´¢ï¼ˆå…¥å£ UIï¼šæ›´åƒâ€œå…¥å£â€ï¼Œä¸è¿½æ±‚çœŸè¾“å…¥ï¼‰ ===== */
  .wq-mm-search {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 10px;

    cursor: default;
    pointer-events: none;

    padding: 7px 10px;
    border-radius: 12px;
    font-size: 13.5px; 
    border: 1px solid rgba(0,0,0,.10);
    background: rgba(243,244,246,1);

    cursor: pointer;
    user-select: none;

    transition: background .15s ease, border-color .15s ease, transform .15s ease;
  }
  .wq-mm-search:hover{
    background: rgba(37,99,235,.03);
    border-color: rgba(37,99,235,.16);
    transform: translateY(-1px);
  }
  .wq-mm-search:active{ transform: scale(.99); }

  html.dark .wq-mm-search {
    border-color: rgba(255,255,255,.12);
    background: rgba(255,255,255,.06);
  }
  html.dark .wq-mm-search:hover{
    background: rgba(96,165,250,.10);
    border-color: rgba(96,165,250,.22);
  }

  .wq-mm-search-left {
    display: flex;
    align-items: center;
    gap: 10px;
    color: rgba(17,24,39,.80);
    min-width: 0;
  }
  html.dark .wq-mm-search-left { color: rgba(255,255,255,.82); }

  .wq-mm-search-left span {
    font-weight: 500;  /* âœ… ä¸åŠ ç²— */
    font-size: 12.5px;
    opacity: .7;
    letter-spacing: .1px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .wq-mm-kbd {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 4px 8px;
    border-radius: 10px;
    border: 1px solid rgba(0,0,0,.10);
    background: rgba(255,255,255,.70);
    color: rgba(17,24,39,.70);
    font-weight: 800;
    font-size: 12px;
    white-space: nowrap;
  }
  html.dark .wq-mm-kbd {
    border-color: rgba(255,255,255,.14);
    background: rgba(255,255,255,.08);
    color: rgba(255,255,255,.72);
  }

  /* ===== èœå•é¡¹ï¼šæ›´ç´§å‡‘ï¼Œå°å±æ›´å‹å¥½ï¼›æ–‡å­—ä¸åŠ ç²— ===== */
  .wq-mm-list { margin-top: 2px; display: flex; flex-direction: column; gap: 10px; }
  .wq-mm-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 10px;

    padding: 12px 12px;
    border-radius: 16px;
    border: 1px solid rgba(0,0,0,.10);
    background: rgba(255,255,255,.70);

    text-decoration: none !important;
    color: rgba(17,24,39,.92);

    font-weight: 600;     /* âœ… ä¸åŠ ç²— */
    font-size: 14.5px;    /* âœ… ç¨å° */
    transition: background .15s ease, border-color .15s ease, transform .15s ease;
  }
  .wq-mm-item:hover{
    background: rgba(37,99,235,.03);
    border-color: rgba(37,99,235,.16);
    transform: scale(.995);
    transform: translateY(0px);
  }

  .wq-mm-item:active{
  transform: scale(.985);        /* æŒ‰ä¸‹æ›´æ˜æ˜¾ä¸€ç‚¹ç‚¹ */
  }

  html.dark .wq-mm-item {
    border-color: rgba(255,255,255,.12);
    background: rgba(255,255,255,.06);
    color: rgba(255,255,255,.92);
  }
  html.dark .wq-mm-item:hover{
    background: rgba(96,165,250,.10);
    border-color: rgba(96,165,250,.22);
  }
  .wq-mm-item:active { transform: scale(.99); }

  .wq-mm-item-left { display: flex; align-items: center; gap: 10px; min-width: 0; }
  .wq-mm-ico {
    width: 18px; height: 18px;
    opacity: .9;
    flex: 0 0 auto;
  }
  .wq-mm-label { min-width: 0; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
  .wq-mm-arrow { opacity: .55; font-weight: 900; }

  .wq-mm-foot {
    margin-top: auto;
    padding-top: 10px;
    border-top: 1px solid rgba(0,0,0,.08);
    color: rgba(100,116,139,1);
    font-size: 12px;
  }
  html.dark .wq-mm-foot {
    border-top-color: rgba(255,255,255,.10);
    color: rgba(209,213,219,.70);
  }

  /* æ›´å°å±å†ç•¥ç¼©ä¸€ç‚¹ */
  @media (max-width: 390px){
    .wq-mm-sheet { width: min(88vw, 304px); }
    .wq-mm-item { padding: 11px 12px; font-size: 14px; }
  }

  @media (prefers-reduced-motion: reduce){
    .wq-mm-mask, .wq-mm-sheet{ transition: none !important; }
  }
</style>

<script>
(function () {
  function isMobile() {
    return window.matchMedia && window.matchMedia("(max-width: 768px)").matches;
  }

  function findMenuButton() {
    return document.querySelector('button.hextra-hamburger-menu[aria-label="Menu"], button.hextra-hamburger-menu');
  }

  // ===== æœç´¢ï¼šåªåšâ€œå…¥å£â€ -> è§¦å‘åŸç”Ÿ âŒ˜K/Ctrl+Kï¼ˆæœ€ç¨³ï¼‰
  function triggerHextraSearchHotkey() {
    var isApple = /Mac|iPhone|iPad|iPod/.test(navigator.platform);
    try {
      var ev = new KeyboardEvent("keydown", {
        key: "k",
        code: "KeyK",
        metaKey: isApple,        // Mac/iOS: âŒ˜K
        ctrlKey: !isApple,       // Windows/Linux: Ctrl+K
        bubbles: true,
      });
      document.dispatchEvent(ev);
      return true;
    } catch (e) {
      return false;
    }
  }

  // fallback 1ï¼šèšç„¦å®˜æ–¹ inputï¼ˆå¦‚æœå­˜åœ¨ï¼‰
  function focusHextraSearchInput() {
    var input = document.querySelector('input.hextra-search-input');
    if (!input) return false;
    try { input.focus(); } catch(_) {}
    try { input.click(); } catch(_) {}
    try { input.select(); } catch(_) {}
    return true;
  }

  // fallback 2ï¼šè·³è½¬æœç´¢é¡µï¼ˆå¦‚æœä½ æœ‰ /search/ï¼‰
  function openHextraSearchOrFallback() {
    if (triggerHextraSearchHotkey()) return true;
    if (focusHextraSearchInput()) return true;
    try { window.location.href = "/search/"; } catch(_) {}
    return false;
  }

  function svg(icon) {
    var map = {
      home: '<svg class="wq-mm-ico" viewBox="0 0 24 24" fill="none"><path d="M3 10.5 12 3l9 7.5V21a1 1 0 0 1-1 1h-5v-7H9v7H4a1 1 0 0 1-1-1V10.5Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/></svg>',
      docs: '<svg class="wq-mm-ico" viewBox="0 0 24 24" fill="none"><path d="M7 3h8l4 4v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2Z" stroke="currentColor" stroke-width="2"/><path d="M15 3v5h5" stroke="currentColor" stroke-width="2"/></svg>',
      cloud: '<svg class="wq-mm-ico" viewBox="0 0 24 24" fill="none"><path d="M7 18a4 4 0 0 1 .6-7.95A5 5 0 0 1 17.8 9.4 3.5 3.5 0 1 1 18 18H7Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>',
      user: '<svg class="wq-mm-ico" viewBox="0 0 24 24" fill="none"><path d="M20 21a8 8 0 1 0-16 0" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M12 11a4 4 0 1 0-4-4 4 4 0 0 0 4 4Z" stroke="currentColor" stroke-width="2"/></svg>',
      mail: '<svg class="wq-mm-ico" viewBox="0 0 24 24" fill="none"><path d="M4 6h16v12H4V6Z" stroke="currentColor" stroke-width="2"/><path d="m4 7 8 6 8-6" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/></svg>',
      github: '<svg class="wq-mm-ico" viewBox="0 0 24 24" fill="currentColor"><path d="M12 .5a12 12 0 0 0-3.8 23.4c.6.1.8-.2.8-.6v-2.2c-3.3.7-4-1.4-4-1.4-.6-1.4-1.3-1.8-1.3-1.8-1.1-.7.1-.7.1-.7 1.2.1 1.9 1.2 1.9 1.2 1.1 1.8 2.9 1.3 3.6 1 .1-.8.4-1.3.7-1.6-2.6-.3-5.3-1.3-5.3-5.8 0-1.3.5-2.4 1.2-3.2-.1-.3-.5-1.5.1-3.1 0 0 1-.3 3.3 1.2a11.4 11.4 0 0 1 6 0C17.6 5.1 18.6 5.4 18.6 5.4c.6 1.6.2 2.8.1 3.1.8.8 1.2 1.9 1.2 3.2 0 4.5-2.7 5.5-5.3 5.8.4.3.8 1 .8 2.1v3.1c0 .4.2.7.8.6A12 12 0 0 0 12 .5Z"/></svg>',
      twitter: '<svg class="wq-mm-ico" viewBox="0 0 24 24" fill="currentColor"><path d="M18.9 2H22l-6.8 7.8L23 22h-6.9l-5.4-7-6.1 7H2l7.3-8.4L1 2h7.1l4.9 6.3L18.9 2Zm-1.2 18h1.7L7.2 3.9H5.4L17.7 20Z"/></svg>',
      search: '<svg class="wq-mm-ico" viewBox="0 0 24 24" fill="none"><path d="M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z" stroke="currentColor" stroke-width="2"/><path d="M21 21l-4.3-4.3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>',
      close: '<svg class="wq-mm-ico" viewBox="0 0 24 24" fill="none"><path d="M6 6l12 12M18 6 6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>'
    };
    return map[icon] || '';
  }

  function ensureDrawer() {
    if (document.getElementById("wqMobileDrawer")) return;

    var mask = document.createElement("div");
    mask.id = "wqMobileDrawer";
    mask.className = "wq-mm-mask";
    mask.setAttribute("aria-hidden", "true");

    // ä½ çš„å¯¼èˆªåœ°å€ï¼ˆæŒ‰éœ€æ”¹ï¼‰
    var BLOG = "https://qinghub.top/";
    var PAN = "https://pan.qinghub.top/";
    var ABOUT = "/about/";
    var DOCS = "/docs/";
    var CONTACT = "mailto:wangqing176176@gmail.com";
    var GITHUB = "https://github.com/wangqing176176-a11y";
    var TWITTER = "https://x.com/Whisky_0802";

    mask.innerHTML = ''
      + '<div class="wq-mm-sheet" role="dialog" aria-modal="true" aria-label="ä¸»å¯¼èˆª">'
      + '  <div class="wq-mm-head">'
      + '    <div class="wq-mm-title">ğŸ§­ å¯¼èˆª</div>'
      + '    <button class="wq-mm-close" type="button" aria-label="å…³é—­å¯¼èˆª">' + svg("close") + '</button>'
      + '  </div>'

      + '  <div class="wq-mm-search" role="button" tabindex="0" aria-label="æœç´¢æ–‡æ¡£">'
      + '    <div class="wq-mm-search-left">' + svg("search") + '<span>æ‰‹æœºç«¯æš‚ä¸æ”¯æŒæœç´¢åŠŸèƒ½</span></div>'
      + '    <div class="wq-mm-kbd"><span>âŒ˜</span><span>K</span></div>'
      + '  </div>'

      + '  <div class="wq-mm-list">'
      + '    <a class="wq-mm-item" href="' + BLOG + '"><div class="wq-mm-item-left">' + svg("home") + '<span class="wq-mm-label">é¦–é¡µ</span></div><span class="wq-mm-arrow">â€º</span></a>'
      + '    <a class="wq-mm-item" href="' + DOCS + '"><div class="wq-mm-item-left">' + svg("docs") + '<span class="wq-mm-label">æ–‡æ¡£</span></div><span class="wq-mm-arrow">â€º</span></a>'
      + '    <a class="wq-mm-item" href="' + PAN + '" target="_blank" rel="noreferrer noopener"><div class="wq-mm-item-left">' + svg("cloud") + '<span class="wq-mm-label">ç½‘ç›˜</span></div><span class="wq-mm-arrow">â€º</span></a>'
      + '    <a class="wq-mm-item" href="' + ABOUT + '"><div class="wq-mm-item-left">' + svg("user") + '<span class="wq-mm-label">å…³äº</span></div><span class="wq-mm-arrow">â€º</span></a>'
      + '    <a class="wq-mm-item" href="' + CONTACT + '"><div class="wq-mm-item-left">' + svg("mail") + '<span class="wq-mm-label">è”ç³»</span></div><span class="wq-mm-arrow">â€º</span></a>'
      + '    <a class="wq-mm-item" href="' + GITHUB + '" target="_blank" rel="noreferrer noopener"><div class="wq-mm-item-left">' + svg("github") + '<span class="wq-mm-label">GitHub</span></div><span class="wq-mm-arrow">â€º</span></a>'
      + '    <a class="wq-mm-item" href="' + TWITTER + '" target="_blank" rel="noreferrer noopener"><div class="wq-mm-item-left">' + svg("twitter") + '<span class="wq-mm-label">Twitter</span></div><span class="wq-mm-arrow">â€º</span></a>'
      + '  </div>'

      + '  <div class="wq-mm-foot">WangQing\'s BLOG Â· ä¸»å¯¼èˆªæŠ½å±‰</div>'
      + '</div>';

    document.body.appendChild(mask);

    function open() {
      var btn = findMenuButton();
      if (btn) btn.classList.add("wq-open");

      mask.classList.add("show");
      requestAnimationFrame(function () {
        mask.classList.add("on");
        mask.setAttribute("aria-hidden", "false");
      });

      try { document.documentElement.style.overflow = "hidden"; } catch(_) {}
    }

    function close() {
      var btn = findMenuButton();
      if (btn) btn.classList.remove("wq-open");

      mask.classList.remove("on");
      mask.setAttribute("aria-hidden", "true");
      try { document.documentElement.style.overflow = ""; } catch(_) {}

      setTimeout(function () { mask.classList.remove("show"); }, 240);
    }

    // ç‚¹å‡»é®ç½©å…³é—­
    mask.addEventListener("click", function(e){
      if (e.target === mask) close();
    });

    // å…³é—­æŒ‰é’®
    var closeBtn = mask.querySelector(".wq-mm-close");
    if (closeBtn) closeBtn.addEventListener("click", function(e){
      e.preventDefault(); e.stopPropagation(); close();
    }, true);

    // æœç´¢ï¼šåªåšå…¥å£ -> è§¦å‘åŸç”Ÿæœç´¢ï¼ˆâŒ˜K/Ctrl+Kï¼‰
    var searchBox = mask.querySelector(".wq-mm-search");
    function doSearch(e){
      if (e){
        e.preventDefault();
        e.stopPropagation();
        if (e.stopImmediatePropagation) e.stopImmediatePropagation();
      }
      close();
      setTimeout(function(){
        openHextraSearchOrFallback();
      }, 180);
    }
    if (searchBox) {
      searchBox.addEventListener("click", doSearch, true);
      searchBox.addEventListener("touchstart", doSearch, { passive: false, capture: true });
      searchBox.addEventListener("keydown", function(e){
        if (e.key === "Enter") doSearch(e);
      }, true);
    }

    // ESC å…³é—­
    document.addEventListener("keydown", function(e){
      if (mask.classList.contains("on") && e.key === "Escape") close();
    });

    window.__WQ_OPEN_DRAWER__ = open;
    window.__WQ_CLOSE_DRAWER__ = close;
  }

  function bindMenuButton() {
    var btn = findMenuButton();
    if (!btn) return;

    // æ•è·é˜¶æ®µæ‹¦æˆªï¼Œé˜²æ­¢ä¸»é¢˜è‡ªå·±çš„ drawer/side tree æŠ¢èµ°ç‚¹å‡»
    btn.addEventListener("click", function(e){
      if (!isMobile()) return;
      ensureDrawer();

      e.preventDefault();
      e.stopPropagation();

      var mask = document.getElementById("wqMobileDrawer");
      var isOn = mask && mask.classList.contains("on");

      if (isOn && typeof window.__WQ_CLOSE_DRAWER__ === "function") window.__WQ_CLOSE_DRAWER__();
      else if (typeof window.__WQ_OPEN_DRAWER__ === "function") window.__WQ_OPEN_DRAWER__();
    }, true);
  }

  document.addEventListener("DOMContentLoaded", function(){
    bindMenuButton();

    // å…¼å®¹ï¼šæŒ‰é’®å»¶è¿Ÿå‡ºç°
    var retry = 0;
    var t = setInterval(function(){
      retry++;
      if (findMenuButton()) {
        bindMenuButton();
        clearInterval(t);
      }
      if (retry > 30) clearInterval(t);
    }, 200);
  });
})();
</script>
<!-- ===== WQ Mobile Drawer Nav END ===== -->



